!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).microAppBridge={})}(this,(function(t){"use strict";const e="undefined"!=typeof window,n="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:Function("return this")();function r(t){return"string"==typeof t}function i(t){return"function"==typeof t}const o=Array.isArray;function u(t){return"[object Object]"===toString.call(t)}function a(t){return"[object Promise]"===toString.call(t)}function c(t){return i(t)&&0===t.name.indexOf("bound ")&&!t.hasOwnProperty("prototype")}function s(t,e=null,...n){const i=e&&r(e)?` app ${e}:`:"";r(t)?console.error(`[micro-app]${i} ${t}`,...n):console.error(`[micro-app]${i}`,t,...n)}function l(t,e=null,...n){const i=e&&r(e)?` app ${e}:`:"";r(t)?console.warn(`[micro-app]${i} ${t}`,...n):console.warn(`[micro-app]${i}`,t,...n)}function f(t,...e){Promise.resolve().then(t.bind(null,...e))}function p(t){return t.startsWith("//")?`${location.protocol}${t}`:t}function h(t,e=null){if(!r(t)||!t)return"";try{const{origin:e,pathname:n,search:r}=new URL(p(t));if(/\.(\w+)$/.test(n))return`${e}${n}${r}`;const i=`${e}${n}/`.replace(/\/\/$/,"/");return/^https?:\/\//.test(i)?`${i}${r}`:""}catch(t){return s(t,e),""}}function d(t){return r(t)&&t?t.replace(/(^\d+)|([^\w\d-_])/gi,""):""}function _(t){const{origin:e,pathname:n}=new URL(t);if(/\.(\w+)$/.test(n)){const t=`${e}${n}`.split("/");return t.pop(),t.join("/")+"/"}return`${e}${n}/`.replace(/\/\/$/,"/")}function v(t,e){return!t||/^((((ht|f)tps?)|file):)?\/\//.test(t)||/^(data|blob):/.test(t)?t:new URL(t,_(p(e))).toString()}function m(t,e,n,r){let i=0;function o(){++i===t.length&&r&&r()}t.forEach(((t,r)=>{a(t)?t.then((t=>{e({data:t,index:r}),o()})).catch((t=>{n({error:t,index:r}),o()})):(e({data:t,index:r}),o())}))}const g=n.requestIdleCallback||function(t){const e=Date.now();return setTimeout((function(){t({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))})}),1)};let y=null;function w(t){y=t}function b(){return y}function A(){w(null)}function E(){return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)}function O(t,e){const n=document.createElement(t,e);return n.__MICRO_APP_NAME__&&delete n.__MICRO_APP_NAME__,n}function N(t,e,n){if(e.innerHTML="",n){const n=t.cloneNode(!0),r=document.createDocumentFragment();Array.from(n.childNodes).forEach((t=>{r.appendChild(t)})),e.appendChild(r)}else Array.from(t.childNodes).forEach((t=>{e.appendChild(t)}))}function C(t){return!t||/(^\d)|([^\w\d-_\u4e00-\u9fa5])/gi.test(t)}function R(t){return/^body$/i.test(t)||/^head$/i.test(t)||/^html$/i.test(t)}function S(t){return function(t){return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot}(t)?t.host:t}var D,P,x,M;function L(t,e=null,n={}){return i(zt.fetch)?zt.fetch(t,n,e):fetch(t,n).then((t=>t.text()))}!function(t){t.NAME="name",t.URL="url"}(D||(D={})),function(t){t.NOT_LOADED="NOT_LOADED",t.LOADING_SOURCE_CODE="LOADING_SOURCE_CODE",t.LOAD_SOURCE_FINISHED="LOAD_SOURCE_FINISHED",t.LOAD_SOURCE_ERROR="LOAD_SOURCE_ERROR",t.MOUNTING="MOUNTING",t.MOUNTED="MOUNTED",t.UNMOUNT="UNMOUNT"}(P||(P={})),function(t){t.CREATED="created",t.BEFOREMOUNT="beforemount",t.MOUNTED="mounted",t.UNMOUNT="unmount",t.ERROR="error",t.BEFORESHOW="beforeshow",t.AFTERSHOW="aftershow",t.AFTERHIDDEN="afterhidden"}(x||(x={})),function(t){t.KEEP_ALIVE_SHOW="KEEP_ALIVE_SHOW",t.KEEP_ALIVE_HIDDEN="KEEP_ALIVE_HIDDEN"}(M||(M={}));const I={};function U(){if(e){const t=Element.prototype.setAttribute,e=Node.prototype.appendChild,n=Node.prototype.insertBefore,r=Node.prototype.replaceChild,i=Node.prototype.removeChild,o=Element.prototype.append,u=Element.prototype.prepend,a=Document.prototype.createElement,c=Document.prototype.createElementNS,s=Document.prototype.createDocumentFragment,l=Document.prototype.querySelector,f=Document.prototype.querySelectorAll,p=Document.prototype.getElementById,h=Document.prototype.getElementsByClassName,d=Document.prototype.getElementsByTagName,_=Document.prototype.getElementsByName,v=Function("return window")(),m=Function("return document")(),g="noModule"in document.createElement("script"),y=m.body.querySelector("#micro-app-template-style"),w=v.addEventListener,b=v.removeEventListener,A=v.setInterval,E=v.setTimeout,O=v.clearInterval,N=v.clearTimeout,C=m.addEventListener,R=m.removeEventListener;window.__MICRO_APP_BASE_APPLICATION__=!0,Object.assign(I,{rawSetAttribute:t,rawAppendChild:e,rawInsertBefore:n,rawReplaceChild:r,rawRemoveChild:i,rawAppend:o,rawPrepend:u,rawCreateElement:a,rawCreateElementNS:c,rawCreateDocumentFragment:s,rawQuerySelector:l,rawQuerySelectorAll:f,rawGetElementById:p,rawGetElementsByClassName:h,rawGetElementsByTagName:d,rawGetElementsByName:_,rawWindow:v,rawDocument:m,supportModuleScript:g,templateStyle:y,rawWindowAddEventListener:w,rawWindowRemoveEventListener:b,rawSetInterval:A,rawSetTimeout:E,rawClearInterval:O,rawClearTimeout:N,rawDocumentAddEventListener:C,rawDocumentRemoveEventListener:R})}}var T;function j(t,e){const{selectorText:n,cssText:r}=t;if(/^((html[\s>~,]+body)|(html|body|:root))$/.test(n))return r.replace(/^((html[\s>~,]+body)|(html|body|:root))/,e);if("*"===n)return r.replace("*",`${e} *`);const i=/(^|\s+)((html[\s>~]+body)|(html|body|:root))(?=[\s>~]+|$)/;return r.replace(/^[\s\S]+{/,(t=>t.replace(/(^|,)([^,]+)/g,((t,n,r)=>i.test(r)?t.replace(i,e):`${n} ${e} ${r.replace(/^\s*/,"")}`))))}function k(t,e,n,r){return t.replace(/url\(["']?([^)"']+)["']?\)/gm,((t,i)=>{if(/^(data|blob):/.test(i))return t;if(/^(https?:)?\/\//.test(i)){if(!E())return t;{const e=i.replace(/^https?:/,"");if(-1!==n.indexOf(e))return t;i=i.replace(window.location.origin,"")}}return/^((\.\.?\/)|[^/])/.test(i)&&r&&(e=function(t){const e=t.split("/");return e.pop(),p(e.join("/")+"/")}(r)),`url("${v(i,e)}")`}))}function $(t,e,n){const r=W(Array.from(t.cssRules),e);return`@${n} ${t.conditionText} {${r}}`}function W(t,e){let n="";for(const r of t)switch(r.type){case T.STYLE_RULE:n+=j(r,e);break;case T.MEDIA_RULE:n+=$(r,e,"media");break;case T.SUPPORTS_RULE:n+=$(r,e,"supports");break;default:n+=r.cssText}return n.replace(/^\s+/,"")}function B(t,e,n,r,i,o){var u,a;if(!e.__MICRO_APP_HAS_SCOPED__){let c=k(W(Array.from(null!==(a=null===(u=t.sheet)||void 0===u?void 0:u.cssRules)&&void 0!==a?a:[]),r),i,n,o);E()&&(c=c.replace(/([;{]\s*content:\s*)([^\s"][^";}]*)/gm,((t,e,n)=>"none"===n||/^(url\()|(counter\()|(attr\()|(open-quote)|(close-quote)/.test(n)?t:`${e}"${n}"`))),e.textContent=c,e.__MICRO_APP_HAS_SCOPED__=!0}}function F(t,e){if(e.scopecss){const n=`${zt.tagName}[name=${e.name}]`;let r=I.templateStyle;if(r||(I.templateStyle=r=O("style"),r.setAttribute("id","micro-app-template-style"),I.rawDocument.body.appendChild(r),r.sheet.disabled=!0),t.textContent)r.textContent=t.textContent,B(r,t,t.textContent,n,e.url,t.__MICRO_APP_LINK_PATH__),r.textContent="";else{const r=new MutationObserver((function(){var i,o;r.disconnect(),!t.textContent&&(null===(o=null===(i=t.sheet)||void 0===i?void 0:i.cssRules)||void 0===o?void 0:o.length)||t.hasAttribute("data-styled")||B(t,t,t.textContent,n,e.url,t.__MICRO_APP_LINK_PATH__)}));r.observe(t,{childList:!0})}}return t}function z(t,e){Object.defineProperties(t,{currentTarget:{get:()=>e},srcElement:{get:()=>e},target:{get:()=>e}})}function H(t){const e=new CustomEvent("load");z(e,t),i(t.onload)?t.onload(e):t.dispatchEvent(e)}function K(t){const e=new CustomEvent("error");z(e,t),i(t.onerror)?t.onerror(e):t.dispatchEvent(e)}!function(t){t[t.STYLE_RULE=1]="STYLE_RULE",t[t.MEDIA_RULE=4]="MEDIA_RULE",t[t.SUPPORTS_RULE=12]="SUPPORTS_RULE"}(T||(T={}));const G=new Map;function q(t,e,n,r=!1){const i=t.getAttribute("rel");let o=t.getAttribute("href"),u=null;if("stylesheet"===i&&o){if(o=v(o,n.url),r)return{url:o,info:{code:"",isGlobal:t.hasAttribute("global")}};u=document.createComment(`link element with href=${o} move to micro-app-head as style element`),n.source.links.set(o,{code:"",placeholder:u,isGlobal:t.hasAttribute("global")})}else i&&["prefetch","preload","prerender","icon","apple-touch-icon"].includes(i)?r?u=document.createComment(`link element with rel=${i}${o?" & href="+o:""} removed by micro-app`):e.removeChild(t):o&&t.setAttribute("href",v(o,n.url));return r?{replaceComment:u}:u?e.replaceChild(u,t):void 0}function V(t,e,n){const r=Array.from(e.source.links.entries()),i=[];for(const[t]of r){const n=G.get(t);n?i.push(n):i.push(L(t,e.name))}m(i,(t=>{!function(t,e,n,r,i){e.isGlobal&&!G.has(t)&&G.set(t,n);const o=O("style");o.textContent=n,o.__MICRO_APP_LINK_PATH__=t,o.setAttribute("data-origin-href",t),r.replaceChild(F(o,i),e.placeholder),e.placeholder=null,e.code=n}(r[t.index][0],r[t.index][1],t.data,n,e)}),(t=>{s(t,e.name)}),(()=>{e.onLoad(t)}))}const Y=new Map;function Z(t,e,n,r=!1){let i=null,o=t.getAttribute("src");if(t.hasAttribute("exclude"))i=document.createComment("script element with exclude attribute removed by micro-app");else{if(t.type&&!["text/javascript","text/ecmascript","application/javascript","application/ecmascript","module"].includes(t.type)||t.hasAttribute("ignore"))return null;if(I.supportModuleScript&&t.noModule||!I.supportModuleScript&&"module"===t.type)i=document.createComment((t.noModule?"noModule":"module")+" script ignored by micro-app");else if(o){o=v(o,n.url);const e={code:"",isExternal:!0,isDynamic:r,async:t.hasAttribute("async"),defer:t.defer||"module"===t.type,module:"module"===t.type,isGlobal:t.hasAttribute("global")};if(r)return{url:o,info:e};n.source.scripts.set(o,e),i=document.createComment(`script with src='${o}' extract by micro-app`)}else if(t.textContent){const e="inline-"+Math.random().toString(36).substr(2,15),o={code:t.textContent,isExternal:!1,isDynamic:r,async:!1,defer:"module"===t.type,module:"module"===t.type};if(r)return{url:e,info:o};n.source.scripts.set(e,o),i=document.createComment("inline script extract by micro-app")}else r||(i=document.createComment("script element removed by micro-app"))}return r?{replaceComment:i}:e.replaceChild(i,t)}function Q(t,e){const n=Array.from(e.source.scripts.entries()),r=[],i=[];for(const[t,o]of n)if(o.isExternal){const n=Y.get(t);n?o.code=n:o.defer||o.async||(r.push(L(t,e.name)),i.push([t,o]))}r.length?m(r,(t=>{!function(t,e,n){e.isGlobal&&!Y.has(t)&&Y.set(t,n);e.code=n}(i[t.index][0],i[t.index][1],t.data)}),(t=>{s(t,e.name)}),(()=>{e.onLoad(t)})):e.onLoad(t)}function J(t,e,n,r,i){var o;try{const u=et(t,e,n.code,n.module);if(e.inline||n.module){const a=O("script");if(X(t,u,n.module,a,i),r)return a;null===(o=e.container)||void 0===o||o.querySelector("micro-app-body").appendChild(a)}else if(tt(u,n),r)return document.createComment("dynamic script extract by micro-app")}catch(t){console.error(`[micro-app from runScript] app ${e.name}: `,t)}}function X(t,e,n,r,i){if(n){const t=new Blob([e],{type:"text/javascript"});r.src=URL.createObjectURL(t),r.setAttribute("type","module"),i&&(i.moduleCount&&i.moduleCount--,r.onload=i.bind(r,0===i.moduleCount))}else r.textContent=e;t.startsWith("inline-")||r.setAttribute("data-origin-src",t)}function tt(t,e){e.code2Function||(e.code2Function=new Function(t)),e.code2Function.call(window)}function et(t,e,n,r){return u(zt.plugins)&&(n=function(t,e,n,r){var a;if(o(r.global))for(const n of r.global)u(n)&&i(n.loader)&&(e=n.loader(e,t,n.options));if(o(null===(a=r.modules)||void 0===a?void 0:a[n]))for(const o of r.modules[n])u(o)&&i(o.loader)&&(e=o.loader(e,t,o.options));return e}(t,n,e.name,zt.plugins)),e.sandBox&&!r?(I.rawWindow.__MICRO_APP_PROXY_WINDOW__=e.sandBox.proxyWindow,`;(function(window, self){with(window){;${n}\n}}).call(window.__MICRO_APP_PROXY_WINDOW__, window.__MICRO_APP_PROXY_WINDOW__, window.__MICRO_APP_PROXY_WINDOW__);`):n}function nt(t,e,n){const r=Array.from(t.children);r.length&&r.forEach((t=>{nt(t,e)}));for(const n of r)n instanceof HTMLLinkElement?n.hasAttribute("exclude")?t.replaceChild(document.createComment("link element with exclude attribute ignored by micro-app"),n):n.hasAttribute("ignore")?n.hasAttribute("href")&&n.setAttribute("href",v(n.getAttribute("href"),e.url)):q(n,t,e):n instanceof HTMLStyleElement?n.hasAttribute("exclude")?t.replaceChild(document.createComment("style element with exclude attribute ignored by micro-app"),n):e.scopecss&&!n.hasAttribute("ignore")&&F(n,e):n instanceof HTMLScriptElement?Z(n,t,e):n instanceof HTMLMetaElement||n instanceof HTMLTitleElement?t.removeChild(n):n instanceof HTMLImageElement&&n.hasAttribute("src")&&n.setAttribute("src",v(n.getAttribute("src"),e.url))}function rt(t,e){const n=function(t){const e=O("div");return e.innerHTML=t,e}(t),r=n.querySelector("micro-app-head"),i=n.querySelector("micro-app-body");if(!r||!i){const t=`element ${r?"body":"head"} is missing`;return e.onerror(new Error(t)),s(t,e.name)}nt(n,e),e.source.links.size?V(n,e,r):e.onLoad(n),e.source.scripts.size?Q(n,e):e.onLoad(n)}const it=new WeakMap;const ot=new WeakMap;const ut=new WeakMap;function at(t,e){if(ut.has(e))return ut.get(e);if(i(e)&&!function(t){if(ot.has(t))return ot.get(t);const e=t.toString(),n=t.prototype&&t.prototype.constructor===t&&Object.getOwnPropertyNames(t.prototype).length>1||/^function\s+[A-Z]/.test(e)||/^class\s+/.test(e);return ot.set(t,n),n}(e)&&!function(t){if(it.has(t))return it.get(t);const e=c(t);return it.set(t,e),e}(e)){const n=e.bind(t);for(const t in e)n[t]=e[t];return e.hasOwnProperty("prototype")&&!n.hasOwnProperty("prototype")&&(n.prototype=e.prototype),ut.set(e,n),n}return e}const ct=new Map;let st=!1;const lt=new Map;function ft(){const{rawDocument:t,rawDocumentAddEventListener:e,rawDocumentRemoveEventListener:n}=I;!st&&function(){if(st=!0,Object.getOwnPropertyDescriptor(document,"onclick"))return l("Cannot redefine document property onclick");const t=document.onclick;document.onclick=null;let e=!1;function n(t){ct.forEach((e=>{i(e)&&e.call(document,t)}))}Object.defineProperty(document,"onclick",{configurable:!0,enumerable:!0,get(){const t=b();return t?ct.get(t):ct.get("base")},set(t){const r=b();r?ct.set(r,t):ct.set("base",t),!e&&i(t)&&(e=!0,I.rawDocumentAddEventListener.call(I.rawDocument,"click",n,!1))}}),t&&(document.onclick=t)}(),document.addEventListener=function(n,r,i){var o;const u=b();if(u&&(!(null===(o=Rt.get(u))||void 0===o?void 0:o.umdMode)||!c(r))){const t=lt.get(u);if(t){const e=t.get(n);e?e.add(r):t.set(n,new Set([r]))}else lt.set(u,new Map([[n,new Set([r])]]));r&&(r.__MICRO_MARK_OPTIONS__=i)}e.call(t,n,r,i)},document.removeEventListener=function(e,r,i){var o;const u=b();if(u&&(!(null===(o=Rt.get(u))||void 0===o?void 0:o.umdMode)||!c(r))){const t=lt.get(u);if(t){const n=t.get(e);(null==n?void 0:n.size)&&n.has(r)&&n.delete(r)}}n.call(t,e,r,i)}}const pt=["unmount","appstate-change"];function ht(t,e){return pt.includes(t)?`${t}-${e.__MICRO_APP_NAME__}`:t}const dt=new class{constructor(){this.eventList=new Map}isLegalName(t){return!!t||(s("event-center: Invalid name"),!1)}on(t,e,n=!1){if(this.isLegalName(t)){if(!i(e))return s("event-center: Invalid callback function");let r=this.eventList.get(t);r?n&&Object.getOwnPropertyNames(r.data).length&&e(r.data):(r={data:{},callbacks:new Set},this.eventList.set(t,r)),r.callbacks.add(e)}}off(t,e){if(this.isLegalName(t)){const n=this.eventList.get(t);n&&(i(e)?n.callbacks.delete(e):n.callbacks.clear())}}dispatch(t,e){if(this.isLegalName(t)){if(!u(e))return s("event-center: data must be object");let n=this.eventList.get(t);if(n){if(n.data!==e){n.data=e;for(const t of n.callbacks)t(e)}}else n={data:e,callbacks:new Set},this.eventList.set(t,n)}}getData(t){var e;const n=this.eventList.get(t);return null!==(e=null==n?void 0:n.data)&&void 0!==e?e:null}};function _t(t,e){return r(t)&&t?e?`__from_base_app_${t}__`:`__from_micro_app_${t}__`:""}class vt{addGlobalDataListener(t,e){const n=this.appName;n&&(t.__APP_NAME__=n,t.__AUTO_TRIGGER__=e),dt.on("global",t,e)}removeGlobalDataListener(t){i(t)&&dt.off("global",t)}setGlobalData(t){A(),dt.dispatch("global",t)}getGlobalData(){return dt.getData("global")}clearGlobalDataListener(){const t=this.appName,e=dt.eventList.get("global");if(e)for(const n of e.callbacks)(t&&t===n.__APP_NAME__||!t&&!n.__APP_NAME__)&&e.callbacks.delete(n)}}class mt extends vt{addDataListener(t,e,n){dt.on(_t(d(t),!1),e,n)}removeDataListener(t,e){i(e)&&dt.off(_t(d(t),!1),e)}getData(t,e=!1){return dt.getData(_t(d(t),e))}setData(t,e){dt.dispatch(_t(d(t),!0),e)}clearDataListener(t){dt.off(_t(d(t),!1))}}class gt extends vt{constructor(t){super(),this.appName=d(t),!this.appName&&s(`Invalid appName ${t}`)}addDataListener(t,e){t.__AUTO_TRIGGER__=e,dt.on(_t(this.appName,!0),t,e)}removeDataListener(t){i(t)&&dt.off(_t(this.appName,!0),t)}getData(){return dt.getData(_t(this.appName,!0))}dispatch(t){A(),dt.dispatch(_t(this.appName,!1),t);const e=Rt.get(this.appName);if((null==e?void 0:e.container)&&u(t)){const n=new CustomEvent("datachange",{detail:{data:t}});S(e.container).dispatchEvent(n)}}clearDataListener(){dt.off(_t(this.appName,!0))}}const yt=["System","__cjsWrapper","__REACT_ERROR_OVERLAY_GLOBAL_HOOK__"],wt=["location"],bt={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0};let At;function Et(t){At&&clearTimeout(At),At=setTimeout(t,0)}class Ot{constructor(t,e,n){this.scopeProperties=["webpackJsonp"],this.escapeProperties=[],this.injectedKeys=new Set,this.escapeKeys=new Set,this.active=!1,this.microWindow={};const i=I.rawWindow,o=I.rawDocument,u=new Map,a=t=>this.microWindow.hasOwnProperty(t)||i.hasOwnProperty(t);this.getScopeProperties(t),this.inject(this.microWindow,t,e),Object.assign(this,function(t){const e=t.__MICRO_APP_NAME__,n=new Map,r=new Map,i=new Map,{rawWindow:o,rawDocument:u,rawWindowAddEventListener:a,rawWindowRemoveEventListener:c,rawSetInterval:s,rawSetTimeout:l,rawClearInterval:f,rawClearTimeout:p,rawDocumentRemoveEventListener:h}=I;t.addEventListener=function(e,r,i){e=ht(e,t);const u=n.get(e);u?u.add(r):n.set(e,new Set([r])),r&&(r.__MICRO_MARK_OPTIONS__=i),a.call(o,e,r,i)},t.removeEventListener=function(e,r,i){e=ht(e,t);const u=n.get(e);(null==u?void 0:u.size)&&u.has(r)&&u.delete(r),c.call(o,e,r,i)},t.setInterval=function(t,e,...n){const i=s.call(o,t,e,...n);return r.set(i,{handler:t,timeout:e,args:n}),i},t.setTimeout=function(t,e,...n){const r=l.call(o,t,e,...n);return i.set(r,{handler:t,timeout:e,args:n}),r},t.clearInterval=function(t){r.delete(t),f.call(o,t)},t.clearTimeout=function(t){i.delete(t),p.call(o,t)};const d=new Map,_=new Map;let v,m=new Map,g=new Map;return{recordUmdEffect:()=>{n.forEach(((t,e)=>{t.size&&d.set(e,new Set(t))})),r.size&&(m=new Map(r)),i.size&&(g=new Map(i)),v=ct.get(e);const t=lt.get(e);t&&t.forEach(((t,e)=>{t.size&&_.set(e,new Set(t))}))},rebuildUmdEffect:()=>{d.forEach(((e,n)=>{for(const r of e)t.addEventListener(n,r,null==r?void 0:r.__MICRO_MARK_OPTIONS__)})),m.forEach((e=>{t.setInterval(e.handler,e.timeout,...e.args)})),g.forEach((e=>{t.setTimeout(e.handler,e.timeout,...e.args)})),v&&ct.set(e,v),w(e),_.forEach(((t,e)=>{for(const n of t)document.addEventListener(e,n,null==n?void 0:n.__MICRO_MARK_OPTIONS__)})),w(null)},releaseEffect:()=>{n.size&&(n.forEach(((t,e)=>{for(const n of t)c.call(o,e,n)})),n.clear()),r.size&&(r.forEach(((t,e)=>{f.call(o,e)})),r.clear()),i.size&&(i.forEach(((t,e)=>{p.call(o,e)})),i.clear()),ct.delete(e);const t=lt.get(e);t&&(t.forEach(((t,e)=>{for(const n of t)h.call(u,e,n)})),t.clear())}}}(this.microWindow)),this.proxyWindow=new Proxy(this.microWindow,{get:(e,u)=>{if(u===Symbol.unscopables)return bt;if(["window","self","globalThis"].includes(u))return this.proxyWindow;if("top"===u||"parent"===u)return i===i.parent?this.proxyWindow:Reflect.get(i,u);if("hasOwnProperty"===u)return a;if("document"===u||"eval"===u)switch(this.active&&(w(t),(n?Et:f)((()=>w(null)))),u){case"document":return o;case"eval":return eval}if(Reflect.has(e,u))return Reflect.get(e,u);if(this.scopeProperties.includes(u)||r(u)&&/^__MICRO_APP_/.test(u))return Reflect.get(e,u);const c=Reflect.get(i,u);return at(i,c)},set:(t,e,n)=>{if(this.active){if(wt.includes(e))Reflect.set(i,e,n);else if(t.hasOwnProperty(e)||!i.hasOwnProperty(e)||this.scopeProperties.includes(e))Reflect.set(t,e,n),this.injectedKeys.add(e);else{const r=Object.getOwnPropertyDescriptor(i,e),{writable:o,configurable:u,enumerable:a}=r;o&&(Object.defineProperty(t,e,{configurable:u,enumerable:a,writable:o,value:n}),this.injectedKeys.add(e))}(this.escapeProperties.includes(e)||yt.includes(e)&&!Reflect.has(i,e))&&!this.scopeProperties.includes(e)&&(Reflect.set(i,e,n),this.escapeKeys.add(e))}return!0},has:(t,e)=>this.scopeProperties.includes(e)?e in t:e in bt||e in t||e in i,getOwnPropertyDescriptor:(t,e)=>{if(t.hasOwnProperty(e))return u.set(e,"target"),Object.getOwnPropertyDescriptor(t,e);if(i.hasOwnProperty(e)){u.set(e,"rawWindow");const t=Object.getOwnPropertyDescriptor(i,e);return t&&!t.configurable&&(t.configurable=!0),t}},defineProperty:(t,e,n)=>"rawWindow"===u.get(e)?Reflect.defineProperty(i,e,n):Reflect.defineProperty(t,e,n),ownKeys:t=>Reflect.ownKeys(i).concat(Reflect.ownKeys(t)).filter((function(t){return!(t in this)&&(this[t]=!0)}),Object.create(null)),deleteProperty:(t,e)=>!t.hasOwnProperty(e)||(this.injectedKeys.has(e)&&this.injectedKeys.delete(e),this.escapeKeys.has(e)&&Reflect.deleteProperty(i,e),Reflect.deleteProperty(t,e))})}start(t){this.active||(this.active=!0,this.microWindow.__MICRO_APP_BASE_ROUTE__=this.microWindow.__MICRO_APP_BASE_URL__=t,I.rawWindow._babelPolyfill&&(I.rawWindow._babelPolyfill=!1),1==++Ot.activeCount&&ft())}stop(){this.active&&(this.active=!1,this.releaseEffect(),this.microWindow.microApp.clearDataListener(),this.microWindow.microApp.clearGlobalDataListener(),this.injectedKeys.forEach((t=>{Reflect.deleteProperty(this.microWindow,t)})),this.injectedKeys.clear(),this.escapeKeys.forEach((t=>{Reflect.deleteProperty(I.rawWindow,t)})),this.escapeKeys.clear(),0==--Ot.activeCount&&(document.addEventListener=I.rawDocumentAddEventListener,document.removeEventListener=I.rawDocumentRemoveEventListener))}recordUmdSnapshot(){this.microWindow.__MICRO_APP_UMD_MODE__=!0,this.recordUmdEffect(),function(t){const e=t.appName;t.umdDataListeners={global:new Set,normal:new Set};const n=dt.eventList.get("global");if(n)for(const r of n.callbacks)e===r.__APP_NAME__&&t.umdDataListeners.global.add(r);const r=dt.eventList.get(_t(e,!0));r&&(t.umdDataListeners.normal=new Set(r.callbacks))}(this.microWindow.microApp),this.recordUmdinjectedValues=new Map,this.injectedKeys.forEach((t=>{this.recordUmdinjectedValues.set(t,Reflect.get(this.microWindow,t))}))}rebuildUmdSnapshot(){this.recordUmdinjectedValues.forEach(((t,e)=>{Reflect.set(this.proxyWindow,e,t)})),this.rebuildUmdEffect(),function(t){for(const e of t.umdDataListeners.global)t.addGlobalDataListener(e,e.__AUTO_TRIGGER__);for(const e of t.umdDataListeners.normal)t.addDataListener(e,e.__AUTO_TRIGGER__)}(this.microWindow.microApp)}getScopeProperties(t){var e;if(u(zt.plugins)){if(o(zt.plugins.global))for(const t of zt.plugins.global)u(t)&&(o(t.scopeProperties)&&(this.scopeProperties=this.scopeProperties.concat(t.scopeProperties)),o(t.escapeProperties)&&(this.escapeProperties=this.escapeProperties.concat(t.escapeProperties)));if(o(null===(e=zt.plugins.modules)||void 0===e?void 0:e[t]))for(const e of zt.plugins.modules[t])u(e)&&(o(e.scopeProperties)&&(this.scopeProperties=this.scopeProperties.concat(e.scopeProperties)),o(e.escapeProperties)&&(this.escapeProperties=this.escapeProperties.concat(e.escapeProperties)))}}inject(t,e,n){t.__MICRO_APP_ENVIRONMENT__=!0,t.__MICRO_APP_NAME__=e,t.__MICRO_APP_PUBLIC_PATH__=_(n),t.microApp=new gt(e),t.rawWindow=I.rawWindow,t.rawDocument=I.rawDocument,t.removeDomScope=A}}function Nt(t,e,n,r){var o;if(!t)return s(`element does not exist in lifecycle ${n}`,e);t=S(t),A();const u=Object.assign({name:e,container:t},r&&{error:r}),a=new CustomEvent(n,{detail:u});!function(t,e){Object.defineProperties(t,{currentTarget:{get:()=>e},target:{get:()=>e}})}(a,t),i(null===(o=zt.lifeCycles)||void 0===o?void 0:o[n])&&zt.lifeCycles[n](a),t.dispatchEvent(a)}function Ct(t,e,n={}){const r=new CustomEvent(`${t}-${e}`,{detail:n});window.dispatchEvent(r)}Ot.activeCount=0;const Rt=new Map;class St{constructor({name:t,url:e,ssrUrl:n,container:r,inline:i,scopecss:o,useSandbox:u,macro:a,baseroute:c}){this.state=P.NOT_LOADED,this.keepAliveState=null,this.keepAliveContainer=null,this.loadSourceLevel=0,this.umdHookMount=null,this.umdHookUnmount=null,this.libraryName=null,this.umdMode=!1,this.isPrefetch=!1,this.container=null,this.macro=!1,this.baseroute="",this.sandBox=null,this.container=null!=r?r:null,this.inline=null!=i&&i,this.baseroute=null!=c?c:"",this.ssrUrl=null!=n?n:"",this.name=t,this.url=e,this.useSandbox=u,this.scopecss=this.useSandbox&&o,this.macro=null!=a&&a,this.source={links:new Map,scripts:new Map},this.loadSourceCode(),this.useSandbox&&(this.sandBox=new Ot(t,e,this.macro))}loadSourceCode(){var t;this.state=P.LOADING_SOURCE_CODE,L((t=this).ssrUrl||t.url,t.name,{cache:"no-cache"}).then((e=>{if(!e){const e="html is empty, please check in detail";return t.onerror(new Error(e)),s(e,t.name)}rt(e=e.replace(/<head[^>]*>[\s\S]*?<\/head>/i,(t=>t.replace(/<head/i,"<micro-app-head").replace(/<\/head>/i,"</micro-app-head>"))).replace(/<body[^>]*>[\s\S]*?<\/body>/i,(t=>t.replace(/<body/i,"<micro-app-body").replace(/<\/body>/i,"</micro-app-body>"))),t)})).catch((e=>{s(`Failed to fetch data from ${t.url}, micro-app stop rendering`,t.name,e),t.onLoadError(e)}))}onLoad(t){if(2==++this.loadSourceLevel){if(this.source.html=t,this.isPrefetch||P.UNMOUNT===this.state)return;this.state=P.LOAD_SOURCE_FINISHED,this.mount()}}onLoadError(t){this.loadSourceLevel=-1,P.UNMOUNT!==this.state&&(this.onerror(t),this.state=P.LOAD_SOURCE_ERROR)}mount(t,e,n){var r,o,u;if("boolean"==typeof e&&e!==this.inline&&(this.inline=e),this.container=null!==(r=this.container)&&void 0!==r?r:t,this.baseroute=null!=n?n:this.baseroute,2!==this.loadSourceLevel)return void(this.state=P.LOADING_SOURCE_CODE);let a;if(Nt(this.container,this.name,x.BEFOREMOUNT),this.state=P.MOUNTING,N(this.source.html,this.container,!this.umdMode),null===(o=this.sandBox)||void 0===o||o.start(this.baseroute),this.umdMode){null===(u=this.sandBox)||void 0===u||u.rebuildUmdSnapshot();try{a=this.umdHookMount()}catch(t){s("an error occurred in the mount function \n",this.name,t)}this.handleMounted(a)}else{let t=!1;!function(t,e,n){const r=Array.from(t.entries()),i=[],o=[];for(const[t,u]of r)u.isDynamic||(u.defer||u.async?(u.isExternal&&!u.code?i.push(L(t,e.name)):i.push(u.code),o.push([t,u]),u.module&&(n.moduleCount=n.moduleCount?++n.moduleCount:1)):(J(t,e,u,!1),n(!1)));i.length?Promise.all(i).then((t=>{t.forEach(((t,r)=>{const[i,u]=o[r];u.code=u.code||t,J(i,e,u,!1,n),!u.module&&n(!1)})),n(void 0===n.moduleCount)})).catch((t=>{s(t,e.name),n(!0)})):n(!0)}(this.source.scripts,this,(e=>{var n;if(!this.umdMode){const{mount:t,unmount:e}=this.getUmdLibraryHooks();if(i(t)&&i(e)){this.umdHookMount=t,this.umdHookUnmount=e,this.umdMode=!0,null===(n=this.sandBox)||void 0===n||n.recordUmdSnapshot();try{a=this.umdHookMount()}catch(t){s("an error occurred in the mount function \n",this.name,t)}}}t||!0!==e&&!this.umdMode||(t=!0,this.handleMounted(a))}))}}handleMounted(t){a(t)?t.then((()=>this.dispatchMountedEvent())).catch((t=>this.onerror(t))):this.dispatchMountedEvent()}dispatchMountedEvent(){P.UNMOUNT!==this.state&&(this.state=P.MOUNTED,Nt(this.container,this.name,x.MOUNTED))}unmount(t,e){let n;if(this.state===P.LOAD_SOURCE_ERROR&&(t=!0),this.state=P.UNMOUNT,this.keepAliveState=null,this.keepAliveContainer=null,this.umdHookUnmount)try{n=this.umdHookUnmount()}catch(t){s("an error occurred in the unmount function \n",this.name,t)}Ct("unmount",this.name),this.handleUnmounted(t,n,e)}handleUnmounted(t,e,n){a(e)?e.then((()=>this.actionsForUnmount(t,n))).catch((()=>this.actionsForUnmount(t,n))):this.actionsForUnmount(t,n)}actionsForUnmount(t,e){var n;Nt(this.container,this.name,x.UNMOUNT),null===(n=this.sandBox)||void 0===n||n.stop(),t?this.actionsForCompletelyDestory():this.umdMode&&this.container.childElementCount&&N(this.container,this.source.html,!1),this.container.innerHTML="",this.container=null,e&&e()}actionsForCompletelyDestory(){!this.useSandbox&&this.umdMode&&delete window[this.libraryName],Rt.delete(this.name)}hiddenKeepAliveApp(){this.keepAliveState=M.KEEP_ALIVE_HIDDEN,Ct("appstate-change",this.name,{appState:"afterhidden"}),Nt(this.container,this.name,x.AFTERHIDDEN),N(this.container,this.keepAliveContainer?this.keepAliveContainer:this.keepAliveContainer=document.createElement("div"),!1),this.container=this.keepAliveContainer}showKeepAliveApp(t){Ct("appstate-change",this.name,{appState:"beforeshow"}),Nt(t,this.name,x.BEFORESHOW),N(this.container,t,!1),this.container=t,this.keepAliveState=M.KEEP_ALIVE_SHOW,Ct("appstate-change",this.name,{appState:"aftershow"}),Nt(this.container,this.name,x.AFTERSHOW)}onerror(t){Nt(this.container,this.name,x.ERROR,t)}getAppState(){return this.state}getKeepAliveState(){return this.keepAliveState}getUmdLibraryHooks(){var t,e;if(P.UNMOUNT!==this.state){const n=null!==(e=null===(t=this.sandBox)||void 0===t?void 0:t.proxyWindow)&&void 0!==e?e:I.rawWindow;return this.libraryName=S(this.container).getAttribute("library")||`micro-app-${this.name}`,"object"==typeof n[this.libraryName]?n[this.libraryName]:{}}return{}}}const Dt=new WeakMap;function Pt(t,e,n){if(e instanceof HTMLStyleElement){if(e.hasAttribute("exclude")){const t=document.createComment("style element with exclude attribute ignored by micro-app");return Dt.set(e,t),t}return n.scopecss&&!e.hasAttribute("ignore")?F(e,n):e}if(e instanceof HTMLLinkElement){if(e.hasAttribute("exclude")){const t=document.createComment("link element with exclude attribute ignored by micro-app");return Dt.set(e,t),t}if(e.hasAttribute("ignore"))return e;const{url:r,info:i,replaceComment:o}=q(e,t,n,!0);if(r&&i){const t=O("style");return t.__MICRO_APP_LINK_PATH__=r,function(t,e,n,r,i){if(n.source.links.has(t))return i.textContent=n.source.links.get(t).code,F(i,n),void f((()=>H(r)));if(G.has(t)){const o=G.get(t);return e.code=o,n.source.links.set(t,e),i.textContent=o,F(i,n),void f((()=>H(r)))}L(t,n.name).then((o=>{e.code=o,n.source.links.set(t,e),e.isGlobal&&G.set(t,o),i.textContent=o,F(i,n),H(r)})).catch((t=>{s(t,n.name),K(r)}))}(r,i,n,e,t),Dt.set(e,t),t}return o?(Dt.set(e,o),o):e}if(e instanceof HTMLScriptElement){const{replaceComment:r,url:i,info:o}=Z(e,t,n,!0)||{};if(i&&o){if(o.isExternal){const t=function(t,e,n,r){const i=()=>H(r);if(n.source.scripts.has(t)){const e=n.source.scripts.get(t);return!e.module&&f(i),J(t,n,e,!0,i)}if(Y.has(t)){const r=Y.get(t);return e.code=r,n.source.scripts.set(t,e),!e.module&&f(i),J(t,n,e,!0,i)}let o;return o=n.inline||e.module?O("script"):document.createComment(`dynamic script with src='${t}' extract by micro-app`),L(t,n.name).then((u=>{e.code=u,n.source.scripts.set(t,e),e.isGlobal&&Y.set(t,u);try{u=et(t,n,u,e.module),n.inline||e.module?X(t,u,e.module,o,i):tt(u,e)}catch(e){console.error(`[micro-app from runDynamicScript] app ${n.name}: `,e,t)}!e.module&&H(r)})).catch((t=>{s(t,n.name),K(r)})),o}(i,o,n,e);return Dt.set(e,t),t}{const t=J(i,n,o,!0);return Dt.set(e,t),t}}return r?(Dt.set(e,r),r):e}return e}function xt(t,e,n,r,i){if(n===document.head){const o=t.container.querySelector("micro-app-head");return i&&!o.contains(i)?I.rawAppendChild.call(o,r):e!==I.rawRemoveChild||o.contains(r)?e===I.rawAppend||e===I.rawPrepend?e.call(o,r):e.call(o,r,i):n.contains(r)?e.call(n,r):r}if(n===document.body){const o=t.container.querySelector("micro-app-body");return i&&!o.contains(i)?I.rawAppendChild.call(o,r):e!==I.rawRemoveChild||o.contains(r)?e===I.rawAppend||e===I.rawPrepend?e.call(o,r):e.call(o,r,i):n.contains(r)?e.call(n,r):r}return e===I.rawAppend||e===I.rawPrepend?e.call(n,r):e.call(n,r,i)}function Mt(t){var e;return null!==(e=Dt.get(t))&&void 0!==e?e:t}function Lt(t,e,n,r){if(null==e?void 0:e.__MICRO_APP_NAME__){const i=Rt.get(e.__MICRO_APP_NAME__);return(null==i?void 0:i.container)?xt(i,r,t,Pt(t,e,i),n&&Mt(n)):r===I.rawAppend||r===I.rawPrepend?r.call(t,e):r.call(t,e,n)}if(r===I.rawAppend||r===I.rawPrepend){const n=b();if(!(e instanceof Node)&&n){const i=Rt.get(n);if(null==i?void 0:i.container){if(t===document.head)return r.call(i.container.querySelector("micro-app-head"),e);if(t===document.body)return r.call(i.container.querySelector("micro-app-body"),e)}}return r.call(t,e)}return r.call(t,e,n)}function It(){!function(){const t=I.rawDocument;function e(e){var n,r,i;const o=b();return o&&e&&!R(e)&&t===this?null!==(i=null===(r=null===(n=Rt.get(o))||void 0===n?void 0:n.container)||void 0===r?void 0:r.querySelector(e))&&void 0!==i?i:null:I.rawQuerySelector.call(this,e)}function n(e){var n,r,i;const o=b();return o&&e&&!R(e)&&t===this?null!==(i=null===(r=null===(n=Rt.get(o))||void 0===n?void 0:n.container)||void 0===r?void 0:r.querySelectorAll(e))&&void 0!==i?i:[]:I.rawQuerySelectorAll.call(this,e)}Document.prototype.createElement=function(t,e){return Ut(I.rawCreateElement.call(this,t,e))},Document.prototype.createElementNS=function(t,e,n){return Ut(I.rawCreateElementNS.call(this,t,e,n))},Document.prototype.createDocumentFragment=function(){return Ut(I.rawCreateDocumentFragment.call(this))},Document.prototype.querySelector=e,Document.prototype.querySelectorAll=n,Document.prototype.getElementById=function(t){if(!b()||C(t))return I.rawGetElementById.call(this,t);try{return e.call(this,`#${t}`)}catch(e){return I.rawGetElementById.call(this,t)}},Document.prototype.getElementsByClassName=function(t){if(!b()||C(t))return I.rawGetElementsByClassName.call(this,t);try{return n.call(this,`.${t}`)}catch(e){return I.rawGetElementsByClassName.call(this,t)}},Document.prototype.getElementsByTagName=function(t){var e;const r=b();if(!r||R(t)||C(t)||!(null===(e=Rt.get(r))||void 0===e?void 0:e.inline)&&/^script$/i.test(t))return I.rawGetElementsByTagName.call(this,t);try{return n.call(this,t)}catch(e){return I.rawGetElementsByTagName.call(this,t)}},Document.prototype.getElementsByName=function(t){if(!b()||C(t))return I.rawGetElementsByName.call(this,t);try{return n.call(this,`[name=${t}]`)}catch(e){return I.rawGetElementsByName.call(this,t)}}}(),Element.prototype.setAttribute=function(t,e){if(/^micro-app(-\S+)?/i.test(this.tagName)&&"data"===t)if(u(e)){const t={};Object.getOwnPropertyNames(e).forEach((n=>{r(n)&&0===n.indexOf("__")||(t[n]=e[n])})),this.data=t}else"[object Object]"!==e&&l("property data must be an object",this.getAttribute("name"));else if((("src"===t||"srcset"===t)&&/^(img|script)$/i.test(this.tagName)||"href"===t&&/^link$/i.test(this.tagName))&&this.__MICRO_APP_NAME__&&Rt.has(this.__MICRO_APP_NAME__)){const n=Rt.get(this.__MICRO_APP_NAME__);I.rawSetAttribute.call(this,t,v(e,n.url))}else I.rawSetAttribute.call(this,t,e)},Node.prototype.appendChild=function(t){return Lt(this,t,null,I.rawAppendChild)},Node.prototype.insertBefore=function(t,e){return Lt(this,t,e,I.rawInsertBefore)},Node.prototype.replaceChild=function(t,e){return Lt(this,t,e,I.rawReplaceChild)},Element.prototype.append=function(...t){let e=0;const n=t.length;for(;e<n;)Lt(this,t[e],null,I.rawAppend),e++},Element.prototype.prepend=function(...t){let e=t.length;for(;e>0;)Lt(this,t[e-1],null,I.rawPrepend),e--},Node.prototype.removeChild=function(t){if(null==t?void 0:t.__MICRO_APP_NAME__){const e=Rt.get(t.__MICRO_APP_NAME__);return(null==e?void 0:e.container)?xt(e,I.rawRemoveChild,this,Mt(t)):I.rawRemoveChild.call(this,t)}return I.rawRemoveChild.call(this,t)}}function Ut(t){const e=b();return e&&(t.__MICRO_APP_NAME__=e),t}function Tt(){w(null),Document.prototype.createElement=I.rawCreateElement,Document.prototype.createElementNS=I.rawCreateElementNS,Document.prototype.createDocumentFragment=I.rawCreateDocumentFragment,Document.prototype.querySelector=I.rawQuerySelector,Document.prototype.querySelectorAll=I.rawQuerySelectorAll,Document.prototype.getElementById=I.rawGetElementById,Document.prototype.getElementsByClassName=I.rawGetElementsByClassName,Document.prototype.getElementsByTagName=I.rawGetElementsByTagName,Document.prototype.getElementsByName=I.rawGetElementsByName,Element.prototype.setAttribute=I.rawSetAttribute,Node.prototype.appendChild=I.rawAppendChild,Node.prototype.insertBefore=I.rawInsertBefore,Node.prototype.replaceChild=I.rawReplaceChild,Node.prototype.removeChild=I.rawRemoveChild,Element.prototype.append=I.rawAppend,Element.prototype.prepend=I.rawPrepend}let jt=!1;function kt(){$t(),Rt.forEach((t=>{t.container&&S(t.container).disconnectedCallback()})),!window.__MICRO_APP_UMD_MODE__&&Rt.clear(),Wt.size&&(Wt.clear(),Tt())}function $t(){window.__MICRO_APP_ENVIRONMENT__&&window.removeEventListener("unmount",kt,!1)}const Wt=new Map;function Bt(t){class e extends HTMLElement{constructor(){super(),this.isWating=!1,this.cacheData=null,this.hasConnected=!1,this.appName="",this.appUrl="",this.ssrUrl="",this.version="0.6.0",this.handleAttributeUpdate=()=>{this.isWating=!1;const t=d(this.getAttribute("name")),e=h(this.getAttribute("url"),this.appName);if(this.legalAttribute("name",t)&&this.legalAttribute("url",e)){const n=Rt.get(t);if(t!==this.appName&&n&&P.UNMOUNT!==n.getAppState()&&M.KEEP_ALIVE_HIDDEN!==n.getKeepAliveState()&&!n.isPrefetch)return this.setAttribute("name",this.appName),s(`app name conflict, an app named ${t} is running`,this.appName);t===this.appName&&e===this.appUrl||(t===this.appName?this.handleUnmount(!0,(()=>{this.actionsForAttributeChange(t,e,n)})):this.getDisposeResult("keep-alive")?(this.handleHiddenKeepAliveApp(),this.actionsForAttributeChange(t,e,n)):this.handleUnmount(this.getDisposeResult("destroy")||this.getDisposeResult("destory"),(()=>{this.actionsForAttributeChange(t,e,n)})))}else t!==this.appName&&this.setAttribute("name",this.appName)},this.querySelector("micro-app-head")||this.performWhenFirstCreated()}static get observedAttributes(){return["name","url"]}connectedCallback(){this.hasConnected=!0,Wt.has(this)||this.performWhenFirstCreated(),f((()=>Nt(this,this.appName,x.CREATED))),this.initialMount()}disconnectedCallback(){this.hasConnected=!1,this.getDisposeResult("keep-alive")?this.handleHiddenKeepAliveApp():(Wt.delete(this),this.handleUnmount(this.getDisposeResult("destroy")||this.getDisposeResult("destory"),(()=>{0===Wt.size&&Tt()})))}attributeChangedCallback(t,e,n){if(this.legalAttribute(t,n)&&this[t===D.NAME?"appName":"appUrl"]!==n)if(t!==D.URL||this.appUrl)if(t!==D.NAME||this.appName)this.isWating||(this.isWating=!0,f(this.handleAttributeUpdate));else{const t=d(n);if(!t)return s(`Invalid attribute name ${n}`,this.appName);this.cacheData&&(zt.setData(t,this.cacheData),this.cacheData=null),this.appName=t,t!==n&&this.setAttribute("name",this.appName),this.handleInitialNameAndUrl()}else{if(!(n=h(n,this.appName)))return s(`Invalid attribute url ${n}`,this.appName);this.appUrl=n,this.handleInitialNameAndUrl()}}handleInitialNameAndUrl(){this.hasConnected&&this.initialMount()}performWhenFirstCreated(){1===Wt.set(this,!0).size&&(It(),function(){if(!jt){jt=!0;const t=O("style");t.setAttribute("type","text/css"),t.textContent=`\n${zt.tagName}, micro-app-body { display: block; } \nmicro-app-head { display: none; }`,I.rawDocument.head.appendChild(t)}}(),$t(),window.__MICRO_APP_ENVIRONMENT__&&window.addEventListener("unmount",kt,!1))}initialMount(){if(this.appName&&this.appUrl)if(this.getDisposeResult("shadowDOM")&&!this.shadowRoot&&i(this.attachShadow)&&this.attachShadow({mode:"open"}),this.getDisposeResult("ssr")?this.ssrUrl=v(I.rawWindow.location.pathname,this.appUrl):this.ssrUrl&&(this.ssrUrl=""),Rt.has(this.appName)){const t=Rt.get(this.appName),e=t.ssrUrl||t.url,n=this.ssrUrl||this.appUrl;t.getKeepAliveState()===M.KEEP_ALIVE_HIDDEN&&t.url===this.appUrl?this.handleShowKeepAliveApp(t):e!==n||!t.isPrefetch&&t.getAppState()!==P.UNMOUNT?t.isPrefetch||t.getAppState()===P.UNMOUNT?(l(`the ${t.isPrefetch?"prefetch":"unmounted"} app with url: ${e} is replaced by a new app`,this.appName),this.handleCreateApp()):s(`app name conflict, an app named ${this.appName} is running`,this.appName):this.handleAppMount(t)}else this.handleCreateApp()}actionsForAttributeChange(t,e,n){var r;this.getDisposeResult("ssr")?this.ssrUrl=v(I.rawWindow.location.pathname,e):this.ssrUrl&&(this.ssrUrl=""),this.appName=t,this.appUrl=e,(null!==(r=this.shadowRoot)&&void 0!==r?r:this).innerHTML="",t!==this.getAttribute("name")&&this.setAttribute("name",this.appName),n?n.getKeepAliveState()===M.KEEP_ALIVE_HIDDEN?n.url===this.appUrl?this.handleShowKeepAliveApp(n):s(`app name conflict, an app named ${this.appName} is running`,this.appName):n.url===this.appUrl&&n.ssrUrl===this.ssrUrl?this.handleAppMount(n):this.handleCreateApp():this.handleCreateApp()}legalAttribute(t,e){return!(!r(e)||!e)||(s(`unexpected attribute ${t}, please check again`,this.appName),!1)}handleAppMount(t){t.isPrefetch=!1,f((()=>{var e;return t.mount(null!==(e=this.shadowRoot)&&void 0!==e?e:this,this.getDisposeResult("inline"),this.getBaseRouteCompatible())}))}handleCreateApp(){var t;Rt.has(this.appName)&&Rt.get(this.appName).actionsForCompletelyDestory();const e=new St({name:this.appName,url:this.appUrl,ssrUrl:this.ssrUrl,container:null!==(t=this.shadowRoot)&&void 0!==t?t:this,inline:this.getDisposeResult("inline"),scopecss:!(this.getDisposeResult("disableScopecss")||this.getDisposeResult("shadowDOM")),useSandbox:!this.getDisposeResult("disableSandbox"),macro:this.getDisposeResult("macro"),baseroute:this.getBaseRouteCompatible()});Rt.set(this.appName,e)}handleUnmount(t,e){const n=Rt.get(this.appName);n&&n.getAppState()!==P.UNMOUNT&&n.unmount(t,e)}handleHiddenKeepAliveApp(){const t=Rt.get(this.appName);t&&t.getAppState()!==P.UNMOUNT&&t.getKeepAliveState()!==M.KEEP_ALIVE_HIDDEN&&t.hiddenKeepAliveApp()}handleShowKeepAliveApp(t){f((()=>{var e;return t.showKeepAliveApp(null!==(e=this.shadowRoot)&&void 0!==e?e:this)}))}getDisposeResult(t){return(this.hasAttribute(t)||zt[t])&&"false"!==this.getAttribute(t)}getBaseRouteCompatible(){var t,e;return null!==(e=null!==(t=this.getAttribute("baseroute"))&&void 0!==t?t:this.getAttribute("baseurl"))&&void 0!==e?e:""}set data(t){this.appName?zt.setData(this.appName,t):this.cacheData=t}get data(){return this.appName?zt.getData(this.appName,!0):this.cacheData?this.cacheData:null}}window.customElements.define(t,e)}function Ft(t){if(!e)return s("preFetch is only supported in browser environment");g((()=>{i(t)&&(t=t()),function(t){const e=[];return o(t)&&t.forEach((t=>{u(t)&&(t.name=d(t.name),t.url=h(t.url,t.name),t.name&&t.url&&!Rt.has(t.name)&&e.push(t))})),e}(t).forEach((t=>{var e,n,r;const i=new St({name:t.name,url:t.url,scopecss:!(null!==(e=t.disableScopecss)&&void 0!==e?e:zt.disableScopecss),useSandbox:!(null!==(n=t.disableSandbox)&&void 0!==n?n:zt.disableSandbox),macro:null!==(r=t.macro)&&void 0!==r?r:zt.macro});i.isPrefetch=!0,Rt.set(t.name,i)}))}))}var zt=new class extends mt{constructor(){super(...arguments),this.tagName="micro-app",this.preFetch=Ft}start(t){if(!e||!window.customElements)return s("micro-app is not supported in this environment");if(null==t?void 0:t.tagName){if(!/^micro-app(-\S+)?/.test(t.tagName))return s(`${t.tagName} is invalid tagName`);this.tagName=t.tagName}if(window.customElements.get(this.tagName))return l(`element ${this.tagName} is already defined`);if(U(),t&&u(t)&&(this.shadowDOM=t.shadowDOM,this.destroy=t.destroy,this.destory=t.destory,this.inline=t.inline,this.disableScopecss=t.disableScopecss,this.disableSandbox=t.disableSandbox,this.macro=t.macro,this.ssr=t.ssr,i(t.fetch)&&(this.fetch=t.fetch),u(t.lifeCycles)&&(this.lifeCycles=t.lifeCycles),t.preFetchApps&&Ft(t.preFetchApps),t.globalAssets&&(u(n=t.globalAssets)&&g((()=>{if(o(n.js)){const t=n.js.filter((t=>r(t)&&t.includes(".js")&&!Y.has(t))),e=[];t.forEach((t=>{e.push(L(t))})),m(e,(e=>{const n=t[e.index];Y.has(n)||Y.set(n,e.data)}),(t=>{s(t)}))}if(o(n.css)){const t=n.css.filter((t=>r(t)&&t.includes(".css")&&!G.has(t))),e=[];t.forEach((t=>{e.push(L(t))})),m(e,(e=>{const n=t[e.index];G.has(n)||G.set(n,e.data)}),(t=>{s(t)}))}}))),u(t.plugins))){const e=t.plugins.modules;if(u(e))for(const t in e){const n=d(t);n&&t!==n&&(e[n]=e[t],delete e[t])}this.plugins=t.plugins}var n;Bt(this.tagName)}},Ht="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Kt={exports:{}};
/**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   */
!function(t,e){(function(){var n,r="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",u=16,a=32,c=64,s=128,l=256,f=1/0,p=9007199254740991,h=NaN,d=4294967295,_=[["ary",s],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",a],["partialRight",c],["rearg",l]],v="[object Arguments]",m="[object Array]",g="[object Boolean]",y="[object Date]",w="[object Error]",b="[object Function]",A="[object GeneratorFunction]",E="[object Map]",O="[object Number]",N="[object Object]",C="[object Promise]",R="[object RegExp]",S="[object Set]",D="[object String]",P="[object Symbol]",x="[object WeakMap]",M="[object ArrayBuffer]",L="[object DataView]",I="[object Float32Array]",U="[object Float64Array]",T="[object Int8Array]",j="[object Int16Array]",k="[object Int32Array]",$="[object Uint8Array]",W="[object Uint8ClampedArray]",B="[object Uint16Array]",F="[object Uint32Array]",z=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,V=RegExp(G.source),Y=RegExp(q.source),Z=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tt=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,rt=RegExp(nt.source),it=/^\s+/,ot=/\s/,ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,st=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ht=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,_t=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,At="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Et="\\u2700-\\u27bf",Ot="a-z\\xdf-\\xf6\\xf8-\\xff",Nt="A-Z\\xc0-\\xd6\\xd8-\\xde",Ct="\\ufe0e\\ufe0f",Rt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",St="['’]",Dt="[\\ud800-\\udfff]",Pt="["+Rt+"]",xt="["+At+"]",Mt="\\d+",Lt="[\\u2700-\\u27bf]",It="["+Ot+"]",Ut="[^\\ud800-\\udfff"+Rt+Mt+Et+Ot+Nt+"]",Tt="\\ud83c[\\udffb-\\udfff]",jt="[^\\ud800-\\udfff]",kt="(?:\\ud83c[\\udde6-\\uddff]){2}",$t="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+Nt+"]",Bt="(?:"+It+"|"+Ut+")",Ft="(?:"+Wt+"|"+Ut+")",zt="(?:['’](?:d|ll|m|re|s|t|ve))?",Kt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Gt="(?:"+xt+"|"+Tt+")"+"?",qt="[\\ufe0e\\ufe0f]?",Vt=qt+Gt+("(?:\\u200d(?:"+[jt,kt,$t].join("|")+")"+qt+Gt+")*"),Yt="(?:"+[Lt,kt,$t].join("|")+")"+Vt,Zt="(?:"+[jt+xt+"?",xt,kt,$t,Dt].join("|")+")",Qt=RegExp(St,"g"),Jt=RegExp(xt,"g"),Xt=RegExp(Tt+"(?="+Tt+")|"+Zt+Vt,"g"),te=RegExp([Wt+"?"+It+"+"+zt+"(?="+[Pt,Wt,"$"].join("|")+")",Ft+"+"+Kt+"(?="+[Pt,Wt+Bt,"$"].join("|")+")",Wt+"?"+Bt+"+"+zt,Wt+"+"+Kt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mt,Yt].join("|"),"g"),ee=RegExp("[\\u200d\\ud800-\\udfff"+At+Ct+"]"),ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,oe={};oe[I]=oe[U]=oe[T]=oe[j]=oe[k]=oe[$]=oe[W]=oe[B]=oe[F]=!0,oe[v]=oe[m]=oe[M]=oe[g]=oe[L]=oe[y]=oe[w]=oe[b]=oe[E]=oe[O]=oe[N]=oe[R]=oe[S]=oe[D]=oe[x]=!1;var ue={};ue[v]=ue[m]=ue[M]=ue[L]=ue[g]=ue[y]=ue[I]=ue[U]=ue[T]=ue[j]=ue[k]=ue[E]=ue[O]=ue[N]=ue[R]=ue[S]=ue[D]=ue[P]=ue[$]=ue[W]=ue[B]=ue[F]=!0,ue[w]=ue[b]=ue[x]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ce=parseFloat,se=parseInt,le="object"==typeof Ht&&Ht&&Ht.Object===Object&&Ht,fe="object"==typeof self&&self&&self.Object===Object&&self,pe=le||fe||Function("return this")(),he=e&&!e.nodeType&&e,de=he&&t&&!t.nodeType&&t,_e=de&&de.exports===he,ve=_e&&le.process,me=function(){try{var t=de&&de.require&&de.require("util").types;return t||ve&&ve.binding&&ve.binding("util")}catch(t){}}(),ge=me&&me.isArrayBuffer,ye=me&&me.isDate,we=me&&me.isMap,be=me&&me.isRegExp,Ae=me&&me.isSet,Ee=me&&me.isTypedArray;function Oe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ne(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var u=t[i];e(r,u,n(u),t)}return r}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Re(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Se(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function De(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var u=t[n];e(u,n,t)&&(o[i++]=u)}return o}function Pe(t,e){return!!(null==t?0:t.length)&&We(t,e,0)>-1}function xe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Me(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Le(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ie(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ue(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var je=He("length");function ke(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function $e(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function We(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):$e(t,Fe,n)}function Be(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Fe(t){return t!=t}function ze(t,e){var n=null==t?0:t.length;return n?qe(t,e)/n:h}function He(t){return function(e){return null==e?n:e[t]}}function Ke(t){return function(e){return null==t?n:t[e]}}function Ge(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function qe(t,e){for(var r,i=-1,o=t.length;++i<o;){var u=e(t[i]);u!==n&&(r=r===n?u:r+u)}return r}function Ve(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ye(t){return t?t.slice(0,dn(t)+1).replace(it,""):t}function Ze(t){return function(e){return t(e)}}function Qe(t,e){return Me(e,(function(e){return t[e]}))}function Je(t,e){return t.has(e)}function Xe(t,e){for(var n=-1,r=t.length;++n<r&&We(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length;n--&&We(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var nn=Ke({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=Ke({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(t){return"\\"+ae[t]}function un(t){return ee.test(t)}function an(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function sn(t,e){for(var n=-1,r=t.length,i=0,u=[];++n<r;){var a=t[n];a!==e&&a!==o||(t[n]=o,u[i++]=n)}return u}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return un(t)?function(t){var e=Xt.lastIndex=0;for(;Xt.test(t);)++e;return e}(t):je(t)}function hn(t){return un(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.split("")}(t)}function dn(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var _n=Ke({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function t(e){var ot,At=(e=null==e?pe:vn.defaults(pe.Object(),e,vn.pick(pe,re))).Array,Et=e.Date,Ot=e.Error,Nt=e.Function,Ct=e.Math,Rt=e.Object,St=e.RegExp,Dt=e.String,Pt=e.TypeError,xt=At.prototype,Mt=Nt.prototype,Lt=Rt.prototype,It=e["__core-js_shared__"],Ut=Mt.toString,Tt=Lt.hasOwnProperty,jt=0,kt=(ot=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+ot:"",$t=Lt.toString,Wt=Ut.call(Rt),Bt=pe._,Ft=St("^"+Ut.call(Tt).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zt=_e?e.Buffer:n,Ht=e.Symbol,Kt=e.Uint8Array,Gt=zt?zt.allocUnsafe:n,qt=cn(Rt.getPrototypeOf,Rt),Vt=Rt.create,Yt=Lt.propertyIsEnumerable,Zt=xt.splice,Xt=Ht?Ht.isConcatSpreadable:n,ee=Ht?Ht.iterator:n,ae=Ht?Ht.toStringTag:n,le=function(){try{var t=ho(Rt,"defineProperty");return t({},"",{}),t}catch(t){}}(),fe=e.clearTimeout!==pe.clearTimeout&&e.clearTimeout,he=Et&&Et.now!==pe.Date.now&&Et.now,de=e.setTimeout!==pe.setTimeout&&e.setTimeout,ve=Ct.ceil,me=Ct.floor,je=Rt.getOwnPropertySymbols,Ke=zt?zt.isBuffer:n,mn=e.isFinite,gn=xt.join,yn=cn(Rt.keys,Rt),wn=Ct.max,bn=Ct.min,An=Et.now,En=e.parseInt,On=Ct.random,Nn=xt.reverse,Cn=ho(e,"DataView"),Rn=ho(e,"Map"),Sn=ho(e,"Promise"),Dn=ho(e,"Set"),Pn=ho(e,"WeakMap"),xn=ho(Rt,"create"),Mn=Pn&&new Pn,Ln={},In=Bo(Cn),Un=Bo(Rn),Tn=Bo(Sn),jn=Bo(Dn),kn=Bo(Pn),$n=Ht?Ht.prototype:n,Wn=$n?$n.valueOf:n,Bn=$n?$n.toString:n;function Fn(t){if(ia(t)&&!qu(t)&&!(t instanceof Gn)){if(t instanceof Kn)return t;if(Tt.call(t,"__wrapped__"))return Fo(t)}return new Kn(t)}var zn=function(){function t(){}return function(e){if(!ra(e))return{};if(Vt)return Vt(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Hn(){}function Kn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Gn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Yn;++e<n;)this.add(t[e])}function Qn(t){var e=this.__data__=new Vn(t);this.size=e.size}function Jn(t,e){var n=qu(t),r=!n&&Gu(t),i=!n&&!r&&Qu(t),o=!n&&!r&&!i&&pa(t),u=n||r||i||o,a=u?Ve(t.length,Dt):[],c=a.length;for(var s in t)!e&&!Tt.call(t,s)||u&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||bo(s,c))||a.push(s);return a}function Xn(t){var e=t.length;return e?t[Zr(0,e-1)]:n}function tr(t,e){return ko(xi(t),sr(e,0,t.length))}function er(t){return ko(xi(t))}function nr(t,e,r){(r!==n&&!zu(t[e],r)||r===n&&!(e in t))&&ar(t,e,r)}function rr(t,e,r){var i=t[e];Tt.call(t,e)&&zu(i,r)&&(r!==n||e in t)||ar(t,e,r)}function ir(t,e){for(var n=t.length;n--;)if(zu(t[n][0],e))return n;return-1}function or(t,e,n,r){return dr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function ur(t,e){return t&&Mi(e,Ia(e),t)}function ar(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function cr(t,e){for(var r=-1,i=e.length,o=At(i),u=null==t;++r<i;)o[r]=u?n:Da(t,e[r]);return o}function sr(t,e,r){return t==t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function lr(t,e,r,i,o,u){var a,c=1&e,s=2&e,l=4&e;if(r&&(a=o?r(t,i,o,u):r(t)),a!==n)return a;if(!ra(t))return t;var f=qu(t);if(f){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Tt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!c)return xi(t,a)}else{var p=mo(t),h=p==b||p==A;if(Qu(t))return Ni(t,c);if(p==N||p==v||h&&!o){if(a=s||h?{}:yo(t),!c)return s?function(t,e){return Mi(t,vo(t),e)}(t,function(t,e){return t&&Mi(e,Ua(e),t)}(a,t)):function(t,e){return Mi(t,_o(t),e)}(t,ur(a,t))}else{if(!ue[p])return o?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case M:return Ci(t);case g:case y:return new r(+t);case L:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case I:case U:case T:case j:case k:case $:case W:case B:case F:return Ri(t,n);case E:return new r;case O:case D:return new r(t);case R:return function(t){var e=new t.constructor(t.source,ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case S:return new r;case P:return i=t,Wn?Rt(Wn.call(i)):{}}var i}(t,p,c)}}u||(u=new Qn);var d=u.get(t);if(d)return d;u.set(t,a),sa(t)?t.forEach((function(n){a.add(lr(n,e,r,n,t,u))})):oa(t)&&t.forEach((function(n,i){a.set(i,lr(n,e,r,i,t,u))}));var _=f?n:(l?s?uo:oo:s?Ua:Ia)(t);return Ce(_||t,(function(n,i){_&&(n=t[i=n]),rr(a,i,lr(n,e,r,i,t,u))})),a}function fr(t,e,r){var i=r.length;if(null==t)return!i;for(t=Rt(t);i--;){var o=r[i],u=e[o],a=t[o];if(a===n&&!(o in t)||!u(a))return!1}return!0}function pr(t,e,i){if("function"!=typeof t)throw new Pt(r);return Io((function(){t.apply(n,i)}),e)}function hr(t,e,n,r){var i=-1,o=Pe,u=!0,a=t.length,c=[],s=e.length;if(!a)return c;n&&(e=Me(e,Ze(n))),r?(o=xe,u=!1):e.length>=200&&(o=Je,u=!1,e=new Zn(e));t:for(;++i<a;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,u&&f==f){for(var p=s;p--;)if(e[p]===f)continue t;c.push(l)}else o(e,f,r)||c.push(l)}return c}Fn.templateSettings={escape:Z,evaluate:Q,interpolate:J,variable:"",imports:{_:Fn}},Fn.prototype=Hn.prototype,Fn.prototype.constructor=Fn,Kn.prototype=zn(Hn.prototype),Kn.prototype.constructor=Kn,Gn.prototype=zn(Hn.prototype),Gn.prototype.constructor=Gn,qn.prototype.clear=function(){this.__data__=xn?xn(null):{},this.size=0},qn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},qn.prototype.get=function(t){var e=this.__data__;if(xn){var r=e[t];return r===i?n:r}return Tt.call(e,t)?e[t]:n},qn.prototype.has=function(t){var e=this.__data__;return xn?e[t]!==n:Tt.call(e,t)},qn.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=xn&&e===n?i:e,this},Vn.prototype.clear=function(){this.__data__=[],this.size=0},Vn.prototype.delete=function(t){var e=this.__data__,n=ir(e,t);return!(n<0)&&(n==e.length-1?e.pop():Zt.call(e,n,1),--this.size,!0)},Vn.prototype.get=function(t){var e=this.__data__,r=ir(e,t);return r<0?n:e[r][1]},Vn.prototype.has=function(t){return ir(this.__data__,t)>-1},Vn.prototype.set=function(t,e){var n=this.__data__,r=ir(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(Rn||Vn),string:new qn}},Yn.prototype.delete=function(t){var e=fo(this,t).delete(t);return this.size-=e?1:0,e},Yn.prototype.get=function(t){return fo(this,t).get(t)},Yn.prototype.has=function(t){return fo(this,t).has(t)},Yn.prototype.set=function(t,e){var n=fo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(t){return this.__data__.set(t,i),this},Zn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.clear=function(){this.__data__=new Vn,this.size=0},Qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Qn.prototype.get=function(t){return this.__data__.get(t)},Qn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Vn){var r=n.__data__;if(!Rn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(t,e),this.size=n.size,this};var dr=Ui(Ar),_r=Ui(Er,!0);function vr(t,e){var n=!0;return dr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function mr(t,e,r){for(var i=-1,o=t.length;++i<o;){var u=t[i],a=e(u);if(null!=a&&(c===n?a==a&&!fa(a):r(a,c)))var c=a,s=u}return s}function gr(t,e){var n=[];return dr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function yr(t,e,n,r,i){var o=-1,u=t.length;for(n||(n=wo),i||(i=[]);++o<u;){var a=t[o];e>0&&n(a)?e>1?yr(a,e-1,n,r,i):Le(i,a):r||(i[i.length]=a)}return i}var wr=Ti(),br=Ti(!0);function Ar(t,e){return t&&wr(t,e,Ia)}function Er(t,e){return t&&br(t,e,Ia)}function Or(t,e){return De(e,(function(e){return ta(t[e])}))}function Nr(t,e){for(var r=0,i=(e=bi(e,t)).length;null!=t&&r<i;)t=t[Wo(e[r++])];return r&&r==i?t:n}function Cr(t,e,n){var r=e(t);return qu(t)?r:Le(r,n(t))}function Rr(t){return null==t?t===n?"[object Undefined]":"[object Null]":ae&&ae in Rt(t)?function(t){var e=Tt.call(t,ae),r=t[ae];try{t[ae]=n;var i=!0}catch(t){}var o=$t.call(t);i&&(e?t[ae]=r:delete t[ae]);return o}(t):function(t){return $t.call(t)}(t)}function Sr(t,e){return t>e}function Dr(t,e){return null!=t&&Tt.call(t,e)}function Pr(t,e){return null!=t&&e in Rt(t)}function xr(t,e,r){for(var i=r?xe:Pe,o=t[0].length,u=t.length,a=u,c=At(u),s=1/0,l=[];a--;){var f=t[a];a&&e&&(f=Me(f,Ze(e))),s=bn(f.length,s),c[a]=!r&&(e||o>=120&&f.length>=120)?new Zn(a&&f):n}f=t[0];var p=-1,h=c[0];t:for(;++p<o&&l.length<s;){var d=f[p],_=e?e(d):d;if(d=r||0!==d?d:0,!(h?Je(h,_):i(l,_,r))){for(a=u;--a;){var v=c[a];if(!(v?Je(v,_):i(t[a],_,r)))continue t}h&&h.push(_),l.push(d)}}return l}function Mr(t,e,r){var i=null==(t=Po(t,e=bi(e,t)))?t:t[Wo(Xo(e))];return null==i?n:Oe(i,t,r)}function Lr(t){return ia(t)&&Rr(t)==v}function Ir(t,e,r,i,o){return t===e||(null==t||null==e||!ia(t)&&!ia(e)?t!=t&&e!=e:function(t,e,r,i,o,u){var a=qu(t),c=qu(e),s=a?m:mo(t),l=c?m:mo(e),f=(s=s==v?N:s)==N,p=(l=l==v?N:l)==N,h=s==l;if(h&&Qu(t)){if(!Qu(e))return!1;a=!0,f=!1}if(h&&!f)return u||(u=new Qn),a||pa(t)?ro(t,e,r,i,o,u):function(t,e,n,r,i,o,u){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M:return!(t.byteLength!=e.byteLength||!o(new Kt(t),new Kt(e)));case g:case y:case O:return zu(+t,+e);case w:return t.name==e.name&&t.message==e.message;case R:case D:return t==e+"";case E:var a=an;case S:var c=1&r;if(a||(a=ln),t.size!=e.size&&!c)return!1;var s=u.get(t);if(s)return s==e;r|=2,u.set(t,e);var l=ro(a(t),a(e),r,i,o,u);return u.delete(t),l;case P:if(Wn)return Wn.call(t)==Wn.call(e)}return!1}(t,e,s,r,i,o,u);if(!(1&r)){var d=f&&Tt.call(t,"__wrapped__"),_=p&&Tt.call(e,"__wrapped__");if(d||_){var b=d?t.value():t,A=_?e.value():e;return u||(u=new Qn),o(b,A,r,i,u)}}if(!h)return!1;return u||(u=new Qn),function(t,e,r,i,o,u){var a=1&r,c=oo(t),s=c.length,l=oo(e).length;if(s!=l&&!a)return!1;var f=s;for(;f--;){var p=c[f];if(!(a?p in e:Tt.call(e,p)))return!1}var h=u.get(t),d=u.get(e);if(h&&d)return h==e&&d==t;var _=!0;u.set(t,e),u.set(e,t);var v=a;for(;++f<s;){var m=t[p=c[f]],g=e[p];if(i)var y=a?i(g,m,p,e,t,u):i(m,g,p,t,e,u);if(!(y===n?m===g||o(m,g,r,i,u):y)){_=!1;break}v||(v="constructor"==p)}if(_&&!v){var w=t.constructor,b=e.constructor;w==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b||(_=!1)}return u.delete(t),u.delete(e),_}(t,e,r,i,o,u)}(t,e,r,i,Ir,o))}function Ur(t,e,r,i){var o=r.length,u=o,a=!i;if(null==t)return!u;for(t=Rt(t);o--;){var c=r[o];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<u;){var s=(c=r[o])[0],l=t[s],f=c[1];if(a&&c[2]){if(l===n&&!(s in t))return!1}else{var p=new Qn;if(i)var h=i(l,f,s,t,e,p);if(!(h===n?Ir(f,l,3,i,p):h))return!1}}return!0}function Tr(t){return!(!ra(t)||(e=t,kt&&kt in e))&&(ta(t)?Ft:vt).test(Bo(t));var e}function jr(t){return"function"==typeof t?t:null==t?uc:"object"==typeof t?qu(t)?zr(t[0],t[1]):Fr(t):_c(t)}function kr(t){if(!Co(t))return yn(t);var e=[];for(var n in Rt(t))Tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function $r(t){if(!ra(t))return function(t){var e=[];if(null!=t)for(var n in Rt(t))e.push(n);return e}(t);var e=Co(t),n=[];for(var r in t)("constructor"!=r||!e&&Tt.call(t,r))&&n.push(r);return n}function Wr(t,e){return t<e}function Br(t,e){var n=-1,r=Yu(t)?At(t.length):[];return dr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Fr(t){var e=po(t);return 1==e.length&&e[0][2]?So(e[0][0],e[0][1]):function(n){return n===t||Ur(n,t,e)}}function zr(t,e){return Eo(t)&&Ro(e)?So(Wo(t),e):function(r){var i=Da(r,t);return i===n&&i===e?Pa(r,t):Ir(e,i,3)}}function Hr(t,e,r,i,o){t!==e&&wr(e,(function(u,a){if(o||(o=new Qn),ra(u))!function(t,e,r,i,o,u,a){var c=Mo(t,r),s=Mo(e,r),l=a.get(s);if(l)return void nr(t,r,l);var f=u?u(c,s,r+"",t,e,a):n,p=f===n;if(p){var h=qu(s),d=!h&&Qu(s),_=!h&&!d&&pa(s);f=s,h||d||_?qu(c)?f=c:Zu(c)?f=xi(c):d?(p=!1,f=Ni(s,!0)):_?(p=!1,f=Ri(s,!0)):f=[]:aa(s)||Gu(s)?(f=c,Gu(c)?f=wa(c):ra(c)&&!ta(c)||(f=yo(s))):p=!1}p&&(a.set(s,f),o(f,s,i,u,a),a.delete(s));nr(t,r,f)}(t,e,a,r,Hr,i,o);else{var c=i?i(Mo(t,a),u,a+"",t,e,o):n;c===n&&(c=u),nr(t,a,c)}}),Ua)}function Kr(t,e){var r=t.length;if(r)return bo(e+=e<0?r:0,r)?t[e]:n}function Gr(t,e,n){e=e.length?Me(e,(function(t){return qu(t)?function(e){return Nr(e,1===t.length?t[0]:t)}:t})):[uc];var r=-1;e=Me(e,Ze(lo()));var i=Br(t,(function(t,n,i){var o=Me(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,u=i.length,a=n.length;for(;++r<u;){var c=Si(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function qr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var u=e[r],a=Nr(t,u);n(a,u)&&ei(o,bi(u,t),a)}return o}function Vr(t,e,n,r){var i=r?Be:We,o=-1,u=e.length,a=t;for(t===e&&(e=xi(e)),n&&(a=Me(t,Ze(n)));++o<u;)for(var c=0,s=e[o],l=n?n(s):s;(c=i(a,l,c,r))>-1;)a!==t&&Zt.call(a,c,1),Zt.call(t,c,1);return t}function Yr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;bo(i)?Zt.call(t,i,1):hi(t,i)}}return t}function Zr(t,e){return t+me(On()*(e-t+1))}function Qr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=me(e/2))&&(t+=t)}while(e);return n}function Jr(t,e){return Uo(Do(t,e,uc),t+"")}function Xr(t){return Xn(za(t))}function ti(t,e){var n=za(t);return ko(n,sr(e,0,n.length))}function ei(t,e,r,i){if(!ra(t))return t;for(var o=-1,u=(e=bi(e,t)).length,a=u-1,c=t;null!=c&&++o<u;){var s=Wo(e[o]),l=r;if("__proto__"===s||"constructor"===s||"prototype"===s)return t;if(o!=a){var f=c[s];(l=i?i(f,s,c):n)===n&&(l=ra(f)?f:bo(e[o+1])?[]:{})}rr(c,s,l),c=c[s]}return t}var ni=Mn?function(t,e){return Mn.set(t,e),t}:uc,ri=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:rc(e),writable:!0})}:uc;function ii(t){return ko(za(t))}function oi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=At(i);++r<i;)o[r]=t[r+e];return o}function ui(t,e){var n;return dr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ai(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,u=t[o];null!==u&&!fa(u)&&(n?u<=e:u<e)?r=o+1:i=o}return i}return ci(t,e,uc,n)}function ci(t,e,r,i){var o=0,u=null==t?0:t.length;if(0===u)return 0;for(var a=(e=r(e))!=e,c=null===e,s=fa(e),l=e===n;o<u;){var f=me((o+u)/2),p=r(t[f]),h=p!==n,d=null===p,_=p==p,v=fa(p);if(a)var m=i||_;else m=l?_&&(i||h):c?_&&h&&(i||!d):s?_&&h&&!d&&(i||!v):!d&&!v&&(i?p<=e:p<e);m?o=f+1:u=f}return bn(u,4294967294)}function si(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var u=t[n],a=e?e(u):u;if(!n||!zu(a,c)){var c=a;o[i++]=0===u?0:u}}return o}function li(t){return"number"==typeof t?t:fa(t)?h:+t}function fi(t){if("string"==typeof t)return t;if(qu(t))return Me(t,fi)+"";if(fa(t))return Bn?Bn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pi(t,e,n){var r=-1,i=Pe,o=t.length,u=!0,a=[],c=a;if(n)u=!1,i=xe;else if(o>=200){var s=e?null:Qi(t);if(s)return ln(s);u=!1,i=Je,c=new Zn}else c=e?[]:a;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,u&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue t;e&&c.push(f),a.push(l)}else i(c,f,n)||(c!==a&&c.push(f),a.push(l))}return a}function hi(t,e){return null==(t=Po(t,e=bi(e,t)))||delete t[Wo(Xo(e))]}function di(t,e,n,r){return ei(t,e,n(Nr(t,e)),r)}function _i(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?oi(t,r?0:o,r?o+1:i):oi(t,r?o+1:0,r?i:o)}function vi(t,e){var n=t;return n instanceof Gn&&(n=n.value()),Ie(e,(function(t,e){return e.func.apply(e.thisArg,Le([t],e.args))}),n)}function mi(t,e,n){var r=t.length;if(r<2)return r?pi(t[0]):[];for(var i=-1,o=At(r);++i<r;)for(var u=t[i],a=-1;++a<r;)a!=i&&(o[i]=hr(o[i]||u,t[a],e,n));return pi(yr(o,1),e,n)}function gi(t,e,r){for(var i=-1,o=t.length,u=e.length,a={};++i<o;){var c=i<u?e[i]:n;r(a,t[i],c)}return a}function yi(t){return Zu(t)?t:[]}function wi(t){return"function"==typeof t?t:uc}function bi(t,e){return qu(t)?t:Eo(t,e)?[t]:$o(ba(t))}var Ai=Jr;function Ei(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:oi(t,e,r)}var Oi=fe||function(t){return pe.clearTimeout(t)};function Ni(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new Kt(e).set(new Kt(t)),e}function Ri(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Si(t,e){if(t!==e){var r=t!==n,i=null===t,o=t==t,u=fa(t),a=e!==n,c=null===e,s=e==e,l=fa(e);if(!c&&!l&&!u&&t>e||u&&a&&s&&!c&&!l||i&&a&&s||!r&&s||!o)return 1;if(!i&&!u&&!l&&t<e||l&&r&&o&&!i&&!u||c&&r&&o||!a&&o||!s)return-1}return 0}function Di(t,e,n,r){for(var i=-1,o=t.length,u=n.length,a=-1,c=e.length,s=wn(o-u,0),l=At(c+s),f=!r;++a<c;)l[a]=e[a];for(;++i<u;)(f||i<o)&&(l[n[i]]=t[i]);for(;s--;)l[a++]=t[i++];return l}function Pi(t,e,n,r){for(var i=-1,o=t.length,u=-1,a=n.length,c=-1,s=e.length,l=wn(o-a,0),f=At(l+s),p=!r;++i<l;)f[i]=t[i];for(var h=i;++c<s;)f[h+c]=e[c];for(;++u<a;)(p||i<o)&&(f[h+n[u]]=t[i++]);return f}function xi(t,e){var n=-1,r=t.length;for(e||(e=At(r));++n<r;)e[n]=t[n];return e}function Mi(t,e,r,i){var o=!r;r||(r={});for(var u=-1,a=e.length;++u<a;){var c=e[u],s=i?i(r[c],t[c],c,r,t):n;s===n&&(s=t[c]),o?ar(r,c,s):rr(r,c,s)}return r}function Li(t,e){return function(n,r){var i=qu(n)?Ne:or,o=e?e():{};return i(n,t,lo(r,2),o)}}function Ii(t){return Jr((function(e,r){var i=-1,o=r.length,u=o>1?r[o-1]:n,a=o>2?r[2]:n;for(u=t.length>3&&"function"==typeof u?(o--,u):n,a&&Ao(r[0],r[1],a)&&(u=o<3?n:u,o=1),e=Rt(e);++i<o;){var c=r[i];c&&t(e,c,i,u)}return e}))}function Ui(t,e){return function(n,r){if(null==n)return n;if(!Yu(n))return t(n,r);for(var i=n.length,o=e?i:-1,u=Rt(n);(e?o--:++o<i)&&!1!==r(u[o],o,u););return n}}function Ti(t){return function(e,n,r){for(var i=-1,o=Rt(e),u=r(e),a=u.length;a--;){var c=u[t?a:++i];if(!1===n(o[c],c,o))break}return e}}function ji(t){return function(e){var r=un(e=ba(e))?hn(e):n,i=r?r[0]:e.charAt(0),o=r?Ei(r,1).join(""):e.slice(1);return i[t]()+o}}function ki(t){return function(e){return Ie(tc(Ga(e).replace(Qt,"")),t,"")}}function $i(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=zn(t.prototype),r=t.apply(n,e);return ra(r)?r:n}}function Wi(t){return function(e,r,i){var o=Rt(e);if(!Yu(e)){var u=lo(r,3);e=Ia(e),r=function(t){return u(o[t],t,o)}}var a=t(e,r,i);return a>-1?o[u?e[a]:a]:n}}function Bi(t){return io((function(e){var i=e.length,o=i,u=Kn.prototype.thru;for(t&&e.reverse();o--;){var a=e[o];if("function"!=typeof a)throw new Pt(r);if(u&&!c&&"wrapper"==co(a))var c=new Kn([],!0)}for(o=c?o:i;++o<i;){var s=co(a=e[o]),l="wrapper"==s?ao(a):n;c=l&&Oo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[co(l[0])].apply(c,l[3]):1==a.length&&Oo(a)?c[s]():c.thru(a)}return function(){var t=arguments,n=t[0];if(c&&1==t.length&&qu(n))return c.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}}))}function Fi(t,e,r,i,o,u,a,c,l,f){var p=e&s,h=1&e,d=2&e,_=24&e,v=512&e,m=d?n:$i(t);return function n(){for(var s=arguments.length,g=At(s),y=s;y--;)g[y]=arguments[y];if(_)var w=so(n),b=en(g,w);if(i&&(g=Di(g,i,o,_)),u&&(g=Pi(g,u,a,_)),s-=b,_&&s<f){var A=sn(g,w);return Yi(t,e,Fi,n.placeholder,r,g,A,c,l,f-s)}var E=h?r:this,O=d?E[t]:t;return s=g.length,c?g=xo(g,c):v&&s>1&&g.reverse(),p&&l<s&&(g.length=l),this&&this!==pe&&this instanceof n&&(O=m||$i(O)),O.apply(E,g)}}function zi(t,e){return function(n,r){return function(t,e,n,r){return Ar(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Hi(t,e){return function(r,i){var o;if(r===n&&i===n)return e;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=fi(r),i=fi(i)):(r=li(r),i=li(i)),o=t(r,i)}return o}}function Ki(t){return io((function(e){return e=Me(e,Ze(lo())),Jr((function(n){var r=this;return t(e,(function(t){return Oe(t,r,n)}))}))}))}function Gi(t,e){var r=(e=e===n?" ":fi(e)).length;if(r<2)return r?Qr(e,t):e;var i=Qr(e,ve(t/pn(e)));return un(e)?Ei(hn(i),0,t).join(""):i.slice(0,t)}function qi(t){return function(e,r,i){return i&&"number"!=typeof i&&Ao(e,r,i)&&(r=i=n),e=va(e),r===n?(r=e,e=0):r=va(r),function(t,e,n,r){for(var i=-1,o=wn(ve((e-t)/(n||1)),0),u=At(o);o--;)u[r?o:++i]=t,t+=n;return u}(e,r,i=i===n?e<r?1:-1:va(i),t)}}function Vi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ya(e),n=ya(n)),t(e,n)}}function Yi(t,e,r,i,o,u,s,l,f,p){var h=8&e;e|=h?a:c,4&(e&=~(h?c:a))||(e&=-4);var d=[t,e,o,h?u:n,h?s:n,h?n:u,h?n:s,l,f,p],_=r.apply(n,d);return Oo(t)&&Lo(_,d),_.placeholder=i,To(_,t,e)}function Zi(t){var e=Ct[t];return function(t,n){if(t=ya(t),(n=null==n?0:bn(ma(n),292))&&mn(t)){var r=(ba(t)+"e").split("e");return+((r=(ba(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Qi=Dn&&1/ln(new Dn([,-0]))[1]==f?function(t){return new Dn(t)}:fc;function Ji(t){return function(e){var n=mo(e);return n==E?an(e):n==S?fn(e):function(t,e){return Me(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,i,f,p,h,d,_){var v=2&e;if(!v&&"function"!=typeof t)throw new Pt(r);var m=f?f.length:0;if(m||(e&=-97,f=p=n),d=d===n?d:wn(ma(d),0),_=_===n?_:ma(_),m-=p?p.length:0,e&c){var g=f,y=p;f=p=n}var w=v?n:ao(t),b=[t,e,i,f,p,g,y,h,d,_];if(w&&function(t,e){var n=t[1],r=e[1],i=n|r,u=i<131,a=r==s&&8==n||r==s&&n==l&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!u&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var c=e[3];if(c){var f=t[3];t[3]=f?Di(f,c,e[4]):c,t[4]=f?sn(t[3],o):e[4]}(c=e[5])&&(f=t[5],t[5]=f?Pi(f,c,e[6]):c,t[6]=f?sn(t[5],o):e[6]);(c=e[7])&&(t[7]=c);r&s&&(t[8]=null==t[8]?e[8]:bn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(b,w),t=b[0],e=b[1],i=b[2],f=b[3],p=b[4],!(_=b[9]=b[9]===n?v?0:t.length:wn(b[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)A=8==e||e==u?function(t,e,r){var i=$i(t);return function o(){for(var u=arguments.length,a=At(u),c=u,s=so(o);c--;)a[c]=arguments[c];var l=u<3&&a[0]!==s&&a[u-1]!==s?[]:sn(a,s);return(u-=l.length)<r?Yi(t,e,Fi,o.placeholder,n,a,l,n,n,r-u):Oe(this&&this!==pe&&this instanceof o?i:t,this,a)}}(t,e,_):e!=a&&33!=e||p.length?Fi.apply(n,b):function(t,e,n,r){var i=1&e,o=$i(t);return function e(){for(var u=-1,a=arguments.length,c=-1,s=r.length,l=At(s+a),f=this&&this!==pe&&this instanceof e?o:t;++c<s;)l[c]=r[c];for(;a--;)l[c++]=arguments[++u];return Oe(f,i?n:this,l)}}(t,e,i,f);else var A=function(t,e,n){var r=1&e,i=$i(t);return function e(){return(this&&this!==pe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,i);return To((w?ni:Lo)(A,b),t,e)}function to(t,e,r,i){return t===n||zu(t,Lt[r])&&!Tt.call(i,r)?e:t}function eo(t,e,r,i,o,u){return ra(t)&&ra(e)&&(u.set(e,t),Hr(t,e,n,eo,u),u.delete(e)),t}function no(t){return aa(t)?n:t}function ro(t,e,r,i,o,u){var a=1&r,c=t.length,s=e.length;if(c!=s&&!(a&&s>c))return!1;var l=u.get(t),f=u.get(e);if(l&&f)return l==e&&f==t;var p=-1,h=!0,d=2&r?new Zn:n;for(u.set(t,e),u.set(e,t);++p<c;){var _=t[p],v=e[p];if(i)var m=a?i(v,_,p,e,t,u):i(_,v,p,t,e,u);if(m!==n){if(m)continue;h=!1;break}if(d){if(!Te(e,(function(t,e){if(!Je(d,e)&&(_===t||o(_,t,r,i,u)))return d.push(e)}))){h=!1;break}}else if(_!==v&&!o(_,v,r,i,u)){h=!1;break}}return u.delete(t),u.delete(e),h}function io(t){return Uo(Do(t,n,Vo),t+"")}function oo(t){return Cr(t,Ia,_o)}function uo(t){return Cr(t,Ua,vo)}var ao=Mn?function(t){return Mn.get(t)}:fc;function co(t){for(var e=t.name+"",n=Ln[e],r=Tt.call(Ln,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function so(t){return(Tt.call(Fn,"placeholder")?Fn:t).placeholder}function lo(){var t=Fn.iteratee||ac;return t=t===ac?jr:t,arguments.length?t(arguments[0],arguments[1]):t}function fo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function po(t){for(var e=Ia(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ro(i)]}return e}function ho(t,e){var r=function(t,e){return null==t?n:t[e]}(t,e);return Tr(r)?r:n}var _o=je?function(t){return null==t?[]:(t=Rt(t),De(je(t),(function(e){return Yt.call(t,e)})))}:gc,vo=je?function(t){for(var e=[];t;)Le(e,_o(t)),t=qt(t);return e}:gc,mo=Rr;function go(t,e,n){for(var r=-1,i=(e=bi(e,t)).length,o=!1;++r<i;){var u=Wo(e[r]);if(!(o=null!=t&&n(t,u)))break;t=t[u]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&na(i)&&bo(u,i)&&(qu(t)||Gu(t))}function yo(t){return"function"!=typeof t.constructor||Co(t)?{}:zn(qt(t))}function wo(t){return qu(t)||Gu(t)||!!(Xt&&t&&t[Xt])}function bo(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&gt.test(t))&&t>-1&&t%1==0&&t<e}function Ao(t,e,n){if(!ra(n))return!1;var r=typeof e;return!!("number"==r?Yu(n)&&bo(e,n.length):"string"==r&&e in n)&&zu(n[e],t)}function Eo(t,e){if(qu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!fa(t))||(tt.test(t)||!X.test(t)||null!=e&&t in Rt(e))}function Oo(t){var e=co(t),n=Fn[e];if("function"!=typeof n||!(e in Gn.prototype))return!1;if(t===n)return!0;var r=ao(n);return!!r&&t===r[0]}(Cn&&mo(new Cn(new ArrayBuffer(1)))!=L||Rn&&mo(new Rn)!=E||Sn&&mo(Sn.resolve())!=C||Dn&&mo(new Dn)!=S||Pn&&mo(new Pn)!=x)&&(mo=function(t){var e=Rr(t),r=e==N?t.constructor:n,i=r?Bo(r):"";if(i)switch(i){case In:return L;case Un:return E;case Tn:return C;case jn:return S;case kn:return x}return e});var No=It?ta:yc;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)}function Ro(t){return t==t&&!ra(t)}function So(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==n||t in Rt(r)))}}function Do(t,e,r){return e=wn(e===n?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=wn(n.length-e,0),u=At(o);++i<o;)u[i]=n[e+i];i=-1;for(var a=At(e+1);++i<e;)a[i]=n[i];return a[e]=r(u),Oe(t,this,a)}}function Po(t,e){return e.length<2?t:Nr(t,oi(e,0,-1))}function xo(t,e){for(var r=t.length,i=bn(e.length,r),o=xi(t);i--;){var u=e[i];t[i]=bo(u,r)?o[u]:n}return t}function Mo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Lo=jo(ni),Io=de||function(t,e){return pe.setTimeout(t,e)},Uo=jo(ri);function To(t,e,n){var r=e+"";return Uo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ut,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ce(_,(function(n){var r="_."+n[0];e&n[1]&&!Pe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(ct):[]}(r),n)))}function jo(t){var e=0,r=0;return function(){var i=An(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function ko(t,e){var r=-1,i=t.length,o=i-1;for(e=e===n?i:e;++r<e;){var u=Zr(r,o),a=t[u];t[u]=t[r],t[r]=a}return t.length=e,t}var $o=function(t){var e=ju(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,(function(t,n,r,i){e.push(r?i.replace(ft,"$1"):n||t)})),e}));function Wo(t){if("string"==typeof t||fa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bo(t){if(null!=t){try{return Ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fo(t){if(t instanceof Gn)return t.clone();var e=new Kn(t.__wrapped__,t.__chain__);return e.__actions__=xi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var zo=Jr((function(t,e){return Zu(t)?hr(t,yr(e,1,Zu,!0)):[]})),Ho=Jr((function(t,e){var r=Xo(e);return Zu(r)&&(r=n),Zu(t)?hr(t,yr(e,1,Zu,!0),lo(r,2)):[]})),Ko=Jr((function(t,e){var r=Xo(e);return Zu(r)&&(r=n),Zu(t)?hr(t,yr(e,1,Zu,!0),n,r):[]}));function Go(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ma(n);return i<0&&(i=wn(r+i,0)),$e(t,lo(e,3),i)}function qo(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return r!==n&&(o=ma(r),o=r<0?wn(i+o,0):bn(o,i-1)),$e(t,lo(e,3),o,!0)}function Vo(t){return(null==t?0:t.length)?yr(t,1):[]}function Yo(t){return t&&t.length?t[0]:n}var Zo=Jr((function(t){var e=Me(t,yi);return e.length&&e[0]===t[0]?xr(e):[]})),Qo=Jr((function(t){var e=Xo(t),r=Me(t,yi);return e===Xo(r)?e=n:r.pop(),r.length&&r[0]===t[0]?xr(r,lo(e,2)):[]})),Jo=Jr((function(t){var e=Xo(t),r=Me(t,yi);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?xr(r,n,e):[]}));function Xo(t){var e=null==t?0:t.length;return e?t[e-1]:n}var tu=Jr(eu);function eu(t,e){return t&&t.length&&e&&e.length?Vr(t,e):t}var nu=io((function(t,e){var n=null==t?0:t.length,r=cr(t,e);return Yr(t,Me(e,(function(t){return bo(t,n)?+t:t})).sort(Si)),r}));function ru(t){return null==t?t:Nn.call(t)}var iu=Jr((function(t){return pi(yr(t,1,Zu,!0))})),ou=Jr((function(t){var e=Xo(t);return Zu(e)&&(e=n),pi(yr(t,1,Zu,!0),lo(e,2))})),uu=Jr((function(t){var e=Xo(t);return e="function"==typeof e?e:n,pi(yr(t,1,Zu,!0),n,e)}));function au(t){if(!t||!t.length)return[];var e=0;return t=De(t,(function(t){if(Zu(t))return e=wn(t.length,e),!0})),Ve(e,(function(e){return Me(t,He(e))}))}function cu(t,e){if(!t||!t.length)return[];var r=au(t);return null==e?r:Me(r,(function(t){return Oe(e,n,t)}))}var su=Jr((function(t,e){return Zu(t)?hr(t,e):[]})),lu=Jr((function(t){return mi(De(t,Zu))})),fu=Jr((function(t){var e=Xo(t);return Zu(e)&&(e=n),mi(De(t,Zu),lo(e,2))})),pu=Jr((function(t){var e=Xo(t);return e="function"==typeof e?e:n,mi(De(t,Zu),n,e)})),hu=Jr(au);var du=Jr((function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,cu(t,r)}));function _u(t){var e=Fn(t);return e.__chain__=!0,e}function vu(t,e){return e(t)}var mu=io((function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,o=function(e){return cr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Gn&&bo(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:vu,args:[o],thisArg:n}),new Kn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(n),t}))):this.thru(o)}));var gu=Li((function(t,e,n){Tt.call(t,n)?++t[n]:ar(t,n,1)}));var yu=Wi(Go),wu=Wi(qo);function bu(t,e){return(qu(t)?Ce:dr)(t,lo(e,3))}function Au(t,e){return(qu(t)?Re:_r)(t,lo(e,3))}var Eu=Li((function(t,e,n){Tt.call(t,n)?t[n].push(e):ar(t,n,[e])}));var Ou=Jr((function(t,e,n){var r=-1,i="function"==typeof e,o=Yu(t)?At(t.length):[];return dr(t,(function(t){o[++r]=i?Oe(e,t,n):Mr(t,e,n)})),o})),Nu=Li((function(t,e,n){ar(t,n,e)}));function Cu(t,e){return(qu(t)?Me:Br)(t,lo(e,3))}var Ru=Li((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Su=Jr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ao(t,e[0],e[1])?e=[]:n>2&&Ao(e[0],e[1],e[2])&&(e=[e[0]]),Gr(t,yr(e,1),[])})),Du=he||function(){return pe.Date.now()};function Pu(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Xi(t,s,n,n,n,n,e)}function xu(t,e){var i;if("function"!=typeof e)throw new Pt(r);return t=ma(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var Mu=Jr((function(t,e,n){var r=1;if(n.length){var i=sn(n,so(Mu));r|=a}return Xi(t,r,e,n,i)})),Lu=Jr((function(t,e,n){var r=3;if(n.length){var i=sn(n,so(Lu));r|=a}return Xi(e,r,t,n,i)}));function Iu(t,e,i){var o,u,a,c,s,l,f=0,p=!1,h=!1,d=!0;if("function"!=typeof t)throw new Pt(r);function _(e){var r=o,i=u;return o=u=n,f=e,c=t.apply(i,r)}function v(t){return f=t,s=Io(g,e),p?_(t):c}function m(t){var r=t-l;return l===n||r>=e||r<0||h&&t-f>=a}function g(){var t=Du();if(m(t))return y(t);s=Io(g,function(t){var n=e-(t-l);return h?bn(n,a-(t-f)):n}(t))}function y(t){return s=n,d&&o?_(t):(o=u=n,c)}function w(){var t=Du(),r=m(t);if(o=arguments,u=this,l=t,r){if(s===n)return v(l);if(h)return Oi(s),s=Io(g,e),_(l)}return s===n&&(s=Io(g,e)),c}return e=ya(e)||0,ra(i)&&(p=!!i.leading,a=(h="maxWait"in i)?wn(ya(i.maxWait)||0,e):a,d="trailing"in i?!!i.trailing:d),w.cancel=function(){s!==n&&Oi(s),f=0,o=l=u=s=n},w.flush=function(){return s===n?c:y(Du())},w}var Uu=Jr((function(t,e){return pr(t,1,e)})),Tu=Jr((function(t,e,n){return pr(t,ya(e)||0,n)}));function ju(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Pt(r);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=t.apply(this,r);return n.cache=o.set(i,u)||o,u};return n.cache=new(ju.Cache||Yn),n}function ku(t){if("function"!=typeof t)throw new Pt(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ju.Cache=Yn;var $u=Ai((function(t,e){var n=(e=1==e.length&&qu(e[0])?Me(e[0],Ze(lo())):Me(yr(e,1),Ze(lo()))).length;return Jr((function(r){for(var i=-1,o=bn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Oe(t,this,r)}))})),Wu=Jr((function(t,e){var r=sn(e,so(Wu));return Xi(t,a,n,e,r)})),Bu=Jr((function(t,e){var r=sn(e,so(Bu));return Xi(t,c,n,e,r)})),Fu=io((function(t,e){return Xi(t,l,n,n,n,e)}));function zu(t,e){return t===e||t!=t&&e!=e}var Hu=Vi(Sr),Ku=Vi((function(t,e){return t>=e})),Gu=Lr(function(){return arguments}())?Lr:function(t){return ia(t)&&Tt.call(t,"callee")&&!Yt.call(t,"callee")},qu=At.isArray,Vu=ge?Ze(ge):function(t){return ia(t)&&Rr(t)==M};function Yu(t){return null!=t&&na(t.length)&&!ta(t)}function Zu(t){return ia(t)&&Yu(t)}var Qu=Ke||yc,Ju=ye?Ze(ye):function(t){return ia(t)&&Rr(t)==y};function Xu(t){if(!ia(t))return!1;var e=Rr(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!aa(t)}function ta(t){if(!ra(t))return!1;var e=Rr(t);return e==b||e==A||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ea(t){return"number"==typeof t&&t==ma(t)}function na(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function ra(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ia(t){return null!=t&&"object"==typeof t}var oa=we?Ze(we):function(t){return ia(t)&&mo(t)==E};function ua(t){return"number"==typeof t||ia(t)&&Rr(t)==O}function aa(t){if(!ia(t)||Rr(t)!=N)return!1;var e=qt(t);if(null===e)return!0;var n=Tt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ut.call(n)==Wt}var ca=be?Ze(be):function(t){return ia(t)&&Rr(t)==R};var sa=Ae?Ze(Ae):function(t){return ia(t)&&mo(t)==S};function la(t){return"string"==typeof t||!qu(t)&&ia(t)&&Rr(t)==D}function fa(t){return"symbol"==typeof t||ia(t)&&Rr(t)==P}var pa=Ee?Ze(Ee):function(t){return ia(t)&&na(t.length)&&!!oe[Rr(t)]};var ha=Vi(Wr),da=Vi((function(t,e){return t<=e}));function _a(t){if(!t)return[];if(Yu(t))return la(t)?hn(t):xi(t);if(ee&&t[ee])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ee]());var e=mo(t);return(e==E?an:e==S?ln:za)(t)}function va(t){return t?(t=ya(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ma(t){var e=va(t),n=e%1;return e==e?n?e-n:e:0}function ga(t){return t?sr(ma(t),0,d):0}function ya(t){if("number"==typeof t)return t;if(fa(t))return h;if(ra(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ra(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ye(t);var n=_t.test(t);return n||mt.test(t)?se(t.slice(2),n?2:8):dt.test(t)?h:+t}function wa(t){return Mi(t,Ua(t))}function ba(t){return null==t?"":fi(t)}var Aa=Ii((function(t,e){if(Co(e)||Yu(e))Mi(e,Ia(e),t);else for(var n in e)Tt.call(e,n)&&rr(t,n,e[n])})),Ea=Ii((function(t,e){Mi(e,Ua(e),t)})),Oa=Ii((function(t,e,n,r){Mi(e,Ua(e),t,r)})),Na=Ii((function(t,e,n,r){Mi(e,Ia(e),t,r)})),Ca=io(cr);var Ra=Jr((function(t,e){t=Rt(t);var r=-1,i=e.length,o=i>2?e[2]:n;for(o&&Ao(e[0],e[1],o)&&(i=1);++r<i;)for(var u=e[r],a=Ua(u),c=-1,s=a.length;++c<s;){var l=a[c],f=t[l];(f===n||zu(f,Lt[l])&&!Tt.call(t,l))&&(t[l]=u[l])}return t})),Sa=Jr((function(t){return t.push(n,eo),Oe(ja,n,t)}));function Da(t,e,r){var i=null==t?n:Nr(t,e);return i===n?r:i}function Pa(t,e){return null!=t&&go(t,e,Pr)}var xa=zi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=$t.call(e)),t[e]=n}),rc(uc)),Ma=zi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=$t.call(e)),Tt.call(t,e)?t[e].push(n):t[e]=[n]}),lo),La=Jr(Mr);function Ia(t){return Yu(t)?Jn(t):kr(t)}function Ua(t){return Yu(t)?Jn(t,!0):$r(t)}var Ta=Ii((function(t,e,n){Hr(t,e,n)})),ja=Ii((function(t,e,n,r){Hr(t,e,n,r)})),ka=io((function(t,e){var n={};if(null==t)return n;var r=!1;e=Me(e,(function(e){return e=bi(e,t),r||(r=e.length>1),e})),Mi(t,uo(t),n),r&&(n=lr(n,7,no));for(var i=e.length;i--;)hi(n,e[i]);return n}));var $a=io((function(t,e){return null==t?{}:function(t,e){return qr(t,e,(function(e,n){return Pa(t,n)}))}(t,e)}));function Wa(t,e){if(null==t)return{};var n=Me(uo(t),(function(t){return[t]}));return e=lo(e),qr(t,n,(function(t,n){return e(t,n[0])}))}var Ba=Ji(Ia),Fa=Ji(Ua);function za(t){return null==t?[]:Qe(t,Ia(t))}var Ha=ki((function(t,e,n){return e=e.toLowerCase(),t+(n?Ka(e):e)}));function Ka(t){return Xa(ba(t).toLowerCase())}function Ga(t){return(t=ba(t))&&t.replace(yt,nn).replace(Jt,"")}var qa=ki((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Va=ki((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ya=ji("toLowerCase");var Za=ki((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Qa=ki((function(t,e,n){return t+(n?" ":"")+Xa(e)}));var Ja=ki((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xa=ji("toUpperCase");function tc(t,e,r){return t=ba(t),(e=r?n:e)===n?function(t){return ne.test(t)}(t)?function(t){return t.match(te)||[]}(t):function(t){return t.match(st)||[]}(t):t.match(e)||[]}var ec=Jr((function(t,e){try{return Oe(t,n,e)}catch(t){return Xu(t)?t:new Ot(t)}})),nc=io((function(t,e){return Ce(e,(function(e){e=Wo(e),ar(t,e,Mu(t[e],t))})),t}));function rc(t){return function(){return t}}var ic=Bi(),oc=Bi(!0);function uc(t){return t}function ac(t){return jr("function"==typeof t?t:lr(t,1))}var cc=Jr((function(t,e){return function(n){return Mr(n,t,e)}})),sc=Jr((function(t,e){return function(n){return Mr(t,n,e)}}));function lc(t,e,n){var r=Ia(e),i=Or(e,r);null!=n||ra(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Or(e,Ia(e)));var o=!(ra(n)&&"chain"in n&&!n.chain),u=ta(t);return Ce(i,(function(n){var r=e[n];t[n]=r,u&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=xi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Le([this.value()],arguments))})})),t}function fc(){}var pc=Ki(Me),hc=Ki(Se),dc=Ki(Te);function _c(t){return Eo(t)?He(Wo(t)):function(t){return function(e){return Nr(e,t)}}(t)}var vc=qi(),mc=qi(!0);function gc(){return[]}function yc(){return!1}var wc=Hi((function(t,e){return t+e}),0),bc=Zi("ceil"),Ac=Hi((function(t,e){return t/e}),1),Ec=Zi("floor");var Oc,Nc=Hi((function(t,e){return t*e}),1),Cc=Zi("round"),Rc=Hi((function(t,e){return t-e}),0);return Fn.after=function(t,e){if("function"!=typeof e)throw new Pt(r);return t=ma(t),function(){if(--t<1)return e.apply(this,arguments)}},Fn.ary=Pu,Fn.assign=Aa,Fn.assignIn=Ea,Fn.assignInWith=Oa,Fn.assignWith=Na,Fn.at=Ca,Fn.before=xu,Fn.bind=Mu,Fn.bindAll=nc,Fn.bindKey=Lu,Fn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return qu(t)?t:[t]},Fn.chain=_u,Fn.chunk=function(t,e,r){e=(r?Ao(t,e,r):e===n)?1:wn(ma(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,u=0,a=At(ve(i/e));o<i;)a[u++]=oi(t,o,o+=e);return a},Fn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Fn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=At(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Le(qu(n)?xi(n):[n],yr(e,1))},Fn.cond=function(t){var e=null==t?0:t.length,n=lo();return t=e?Me(t,(function(t){if("function"!=typeof t[1])throw new Pt(r);return[n(t[0]),t[1]]})):[],Jr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Oe(i[0],this,n))return Oe(i[1],this,n)}}))},Fn.conforms=function(t){return function(t){var e=Ia(t);return function(n){return fr(n,t,e)}}(lr(t,1))},Fn.constant=rc,Fn.countBy=gu,Fn.create=function(t,e){var n=zn(t);return null==e?n:ur(n,e)},Fn.curry=function t(e,r,i){var o=Xi(e,8,n,n,n,n,n,r=i?n:r);return o.placeholder=t.placeholder,o},Fn.curryRight=function t(e,r,i){var o=Xi(e,u,n,n,n,n,n,r=i?n:r);return o.placeholder=t.placeholder,o},Fn.debounce=Iu,Fn.defaults=Ra,Fn.defaultsDeep=Sa,Fn.defer=Uu,Fn.delay=Tu,Fn.difference=zo,Fn.differenceBy=Ho,Fn.differenceWith=Ko,Fn.drop=function(t,e,r){var i=null==t?0:t.length;return i?oi(t,(e=r||e===n?1:ma(e))<0?0:e,i):[]},Fn.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?oi(t,0,(e=i-(e=r||e===n?1:ma(e)))<0?0:e):[]},Fn.dropRightWhile=function(t,e){return t&&t.length?_i(t,lo(e,3),!0,!0):[]},Fn.dropWhile=function(t,e){return t&&t.length?_i(t,lo(e,3),!0):[]},Fn.fill=function(t,e,r,i){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&Ao(t,e,r)&&(r=0,i=o),function(t,e,r,i){var o=t.length;for((r=ma(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:ma(i))<0&&(i+=o),i=r>i?0:ga(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},Fn.filter=function(t,e){return(qu(t)?De:gr)(t,lo(e,3))},Fn.flatMap=function(t,e){return yr(Cu(t,e),1)},Fn.flatMapDeep=function(t,e){return yr(Cu(t,e),f)},Fn.flatMapDepth=function(t,e,r){return r=r===n?1:ma(r),yr(Cu(t,e),r)},Fn.flatten=Vo,Fn.flattenDeep=function(t){return(null==t?0:t.length)?yr(t,f):[]},Fn.flattenDepth=function(t,e){return(null==t?0:t.length)?yr(t,e=e===n?1:ma(e)):[]},Fn.flip=function(t){return Xi(t,512)},Fn.flow=ic,Fn.flowRight=oc,Fn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Fn.functions=function(t){return null==t?[]:Or(t,Ia(t))},Fn.functionsIn=function(t){return null==t?[]:Or(t,Ua(t))},Fn.groupBy=Eu,Fn.initial=function(t){return(null==t?0:t.length)?oi(t,0,-1):[]},Fn.intersection=Zo,Fn.intersectionBy=Qo,Fn.intersectionWith=Jo,Fn.invert=xa,Fn.invertBy=Ma,Fn.invokeMap=Ou,Fn.iteratee=ac,Fn.keyBy=Nu,Fn.keys=Ia,Fn.keysIn=Ua,Fn.map=Cu,Fn.mapKeys=function(t,e){var n={};return e=lo(e,3),Ar(t,(function(t,r,i){ar(n,e(t,r,i),t)})),n},Fn.mapValues=function(t,e){var n={};return e=lo(e,3),Ar(t,(function(t,r,i){ar(n,r,e(t,r,i))})),n},Fn.matches=function(t){return Fr(lr(t,1))},Fn.matchesProperty=function(t,e){return zr(t,lr(e,1))},Fn.memoize=ju,Fn.merge=Ta,Fn.mergeWith=ja,Fn.method=cc,Fn.methodOf=sc,Fn.mixin=lc,Fn.negate=ku,Fn.nthArg=function(t){return t=ma(t),Jr((function(e){return Kr(e,t)}))},Fn.omit=ka,Fn.omitBy=function(t,e){return Wa(t,ku(lo(e)))},Fn.once=function(t){return xu(2,t)},Fn.orderBy=function(t,e,r,i){return null==t?[]:(qu(e)||(e=null==e?[]:[e]),qu(r=i?n:r)||(r=null==r?[]:[r]),Gr(t,e,r))},Fn.over=pc,Fn.overArgs=$u,Fn.overEvery=hc,Fn.overSome=dc,Fn.partial=Wu,Fn.partialRight=Bu,Fn.partition=Ru,Fn.pick=$a,Fn.pickBy=Wa,Fn.property=_c,Fn.propertyOf=function(t){return function(e){return null==t?n:Nr(t,e)}},Fn.pull=tu,Fn.pullAll=eu,Fn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Vr(t,e,lo(n,2)):t},Fn.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Vr(t,e,n,r):t},Fn.pullAt=nu,Fn.range=vc,Fn.rangeRight=mc,Fn.rearg=Fu,Fn.reject=function(t,e){return(qu(t)?De:gr)(t,ku(lo(e,3)))},Fn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=lo(e,3);++r<o;){var u=t[r];e(u,r,t)&&(n.push(u),i.push(r))}return Yr(t,i),n},Fn.rest=function(t,e){if("function"!=typeof t)throw new Pt(r);return Jr(t,e=e===n?e:ma(e))},Fn.reverse=ru,Fn.sampleSize=function(t,e,r){return e=(r?Ao(t,e,r):e===n)?1:ma(e),(qu(t)?tr:ti)(t,e)},Fn.set=function(t,e,n){return null==t?t:ei(t,e,n)},Fn.setWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:ei(t,e,r,i)},Fn.shuffle=function(t){return(qu(t)?er:ii)(t)},Fn.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&Ao(t,e,r)?(e=0,r=i):(e=null==e?0:ma(e),r=r===n?i:ma(r)),oi(t,e,r)):[]},Fn.sortBy=Su,Fn.sortedUniq=function(t){return t&&t.length?si(t):[]},Fn.sortedUniqBy=function(t,e){return t&&t.length?si(t,lo(e,2)):[]},Fn.split=function(t,e,r){return r&&"number"!=typeof r&&Ao(t,e,r)&&(e=r=n),(r=r===n?d:r>>>0)?(t=ba(t))&&("string"==typeof e||null!=e&&!ca(e))&&!(e=fi(e))&&un(t)?Ei(hn(t),0,r):t.split(e,r):[]},Fn.spread=function(t,e){if("function"!=typeof t)throw new Pt(r);return e=null==e?0:wn(ma(e),0),Jr((function(n){var r=n[e],i=Ei(n,0,e);return r&&Le(i,r),Oe(t,this,i)}))},Fn.tail=function(t){var e=null==t?0:t.length;return e?oi(t,1,e):[]},Fn.take=function(t,e,r){return t&&t.length?oi(t,0,(e=r||e===n?1:ma(e))<0?0:e):[]},Fn.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?oi(t,(e=i-(e=r||e===n?1:ma(e)))<0?0:e,i):[]},Fn.takeRightWhile=function(t,e){return t&&t.length?_i(t,lo(e,3),!1,!0):[]},Fn.takeWhile=function(t,e){return t&&t.length?_i(t,lo(e,3)):[]},Fn.tap=function(t,e){return e(t),t},Fn.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new Pt(r);return ra(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Iu(t,e,{leading:i,maxWait:e,trailing:o})},Fn.thru=vu,Fn.toArray=_a,Fn.toPairs=Ba,Fn.toPairsIn=Fa,Fn.toPath=function(t){return qu(t)?Me(t,Wo):fa(t)?[t]:xi($o(ba(t)))},Fn.toPlainObject=wa,Fn.transform=function(t,e,n){var r=qu(t),i=r||Qu(t)||pa(t);if(e=lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ra(t)&&ta(o)?zn(qt(t)):{}}return(i?Ce:Ar)(t,(function(t,r,i){return e(n,t,r,i)})),n},Fn.unary=function(t){return Pu(t,1)},Fn.union=iu,Fn.unionBy=ou,Fn.unionWith=uu,Fn.uniq=function(t){return t&&t.length?pi(t):[]},Fn.uniqBy=function(t,e){return t&&t.length?pi(t,lo(e,2)):[]},Fn.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?pi(t,n,e):[]},Fn.unset=function(t,e){return null==t||hi(t,e)},Fn.unzip=au,Fn.unzipWith=cu,Fn.update=function(t,e,n){return null==t?t:di(t,e,wi(n))},Fn.updateWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:di(t,e,wi(r),i)},Fn.values=za,Fn.valuesIn=function(t){return null==t?[]:Qe(t,Ua(t))},Fn.without=su,Fn.words=tc,Fn.wrap=function(t,e){return Wu(wi(e),t)},Fn.xor=lu,Fn.xorBy=fu,Fn.xorWith=pu,Fn.zip=hu,Fn.zipObject=function(t,e){return gi(t||[],e||[],rr)},Fn.zipObjectDeep=function(t,e){return gi(t||[],e||[],ei)},Fn.zipWith=du,Fn.entries=Ba,Fn.entriesIn=Fa,Fn.extend=Ea,Fn.extendWith=Oa,lc(Fn,Fn),Fn.add=wc,Fn.attempt=ec,Fn.camelCase=Ha,Fn.capitalize=Ka,Fn.ceil=bc,Fn.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=ya(r))==r?r:0),e!==n&&(e=(e=ya(e))==e?e:0),sr(ya(t),e,r)},Fn.clone=function(t){return lr(t,4)},Fn.cloneDeep=function(t){return lr(t,5)},Fn.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:n)},Fn.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:n)},Fn.conformsTo=function(t,e){return null==e||fr(t,e,Ia(e))},Fn.deburr=Ga,Fn.defaultTo=function(t,e){return null==t||t!=t?e:t},Fn.divide=Ac,Fn.endsWith=function(t,e,r){t=ba(t),e=fi(e);var i=t.length,o=r=r===n?i:sr(ma(r),0,i);return(r-=e.length)>=0&&t.slice(r,o)==e},Fn.eq=zu,Fn.escape=function(t){return(t=ba(t))&&Y.test(t)?t.replace(q,rn):t},Fn.escapeRegExp=function(t){return(t=ba(t))&&rt.test(t)?t.replace(nt,"\\$&"):t},Fn.every=function(t,e,r){var i=qu(t)?Se:vr;return r&&Ao(t,e,r)&&(e=n),i(t,lo(e,3))},Fn.find=yu,Fn.findIndex=Go,Fn.findKey=function(t,e){return ke(t,lo(e,3),Ar)},Fn.findLast=wu,Fn.findLastIndex=qo,Fn.findLastKey=function(t,e){return ke(t,lo(e,3),Er)},Fn.floor=Ec,Fn.forEach=bu,Fn.forEachRight=Au,Fn.forIn=function(t,e){return null==t?t:wr(t,lo(e,3),Ua)},Fn.forInRight=function(t,e){return null==t?t:br(t,lo(e,3),Ua)},Fn.forOwn=function(t,e){return t&&Ar(t,lo(e,3))},Fn.forOwnRight=function(t,e){return t&&Er(t,lo(e,3))},Fn.get=Da,Fn.gt=Hu,Fn.gte=Ku,Fn.has=function(t,e){return null!=t&&go(t,e,Dr)},Fn.hasIn=Pa,Fn.head=Yo,Fn.identity=uc,Fn.includes=function(t,e,n,r){t=Yu(t)?t:za(t),n=n&&!r?ma(n):0;var i=t.length;return n<0&&(n=wn(i+n,0)),la(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&We(t,e,n)>-1},Fn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ma(n);return i<0&&(i=wn(r+i,0)),We(t,e,i)},Fn.inRange=function(t,e,r){return e=va(e),r===n?(r=e,e=0):r=va(r),function(t,e,n){return t>=bn(e,n)&&t<wn(e,n)}(t=ya(t),e,r)},Fn.invoke=La,Fn.isArguments=Gu,Fn.isArray=qu,Fn.isArrayBuffer=Vu,Fn.isArrayLike=Yu,Fn.isArrayLikeObject=Zu,Fn.isBoolean=function(t){return!0===t||!1===t||ia(t)&&Rr(t)==g},Fn.isBuffer=Qu,Fn.isDate=Ju,Fn.isElement=function(t){return ia(t)&&1===t.nodeType&&!aa(t)},Fn.isEmpty=function(t){if(null==t)return!0;if(Yu(t)&&(qu(t)||"string"==typeof t||"function"==typeof t.splice||Qu(t)||pa(t)||Gu(t)))return!t.length;var e=mo(t);if(e==E||e==S)return!t.size;if(Co(t))return!kr(t).length;for(var n in t)if(Tt.call(t,n))return!1;return!0},Fn.isEqual=function(t,e){return Ir(t,e)},Fn.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:n)?r(t,e):n;return i===n?Ir(t,e,n,r):!!i},Fn.isError=Xu,Fn.isFinite=function(t){return"number"==typeof t&&mn(t)},Fn.isFunction=ta,Fn.isInteger=ea,Fn.isLength=na,Fn.isMap=oa,Fn.isMatch=function(t,e){return t===e||Ur(t,e,po(e))},Fn.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,Ur(t,e,po(e),r)},Fn.isNaN=function(t){return ua(t)&&t!=+t},Fn.isNative=function(t){if(No(t))throw new Ot("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Tr(t)},Fn.isNil=function(t){return null==t},Fn.isNull=function(t){return null===t},Fn.isNumber=ua,Fn.isObject=ra,Fn.isObjectLike=ia,Fn.isPlainObject=aa,Fn.isRegExp=ca,Fn.isSafeInteger=function(t){return ea(t)&&t>=-9007199254740991&&t<=p},Fn.isSet=sa,Fn.isString=la,Fn.isSymbol=fa,Fn.isTypedArray=pa,Fn.isUndefined=function(t){return t===n},Fn.isWeakMap=function(t){return ia(t)&&mo(t)==x},Fn.isWeakSet=function(t){return ia(t)&&"[object WeakSet]"==Rr(t)},Fn.join=function(t,e){return null==t?"":gn.call(t,e)},Fn.kebabCase=qa,Fn.last=Xo,Fn.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=ma(r))<0?wn(i+o,0):bn(o,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):$e(t,Fe,o,!0)},Fn.lowerCase=Va,Fn.lowerFirst=Ya,Fn.lt=ha,Fn.lte=da,Fn.max=function(t){return t&&t.length?mr(t,uc,Sr):n},Fn.maxBy=function(t,e){return t&&t.length?mr(t,lo(e,2),Sr):n},Fn.mean=function(t){return ze(t,uc)},Fn.meanBy=function(t,e){return ze(t,lo(e,2))},Fn.min=function(t){return t&&t.length?mr(t,uc,Wr):n},Fn.minBy=function(t,e){return t&&t.length?mr(t,lo(e,2),Wr):n},Fn.stubArray=gc,Fn.stubFalse=yc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Nc,Fn.nth=function(t,e){return t&&t.length?Kr(t,ma(e)):n},Fn.noConflict=function(){return pe._===this&&(pe._=Bt),this},Fn.noop=fc,Fn.now=Du,Fn.pad=function(t,e,n){t=ba(t);var r=(e=ma(e))?pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Gi(me(i),n)+t+Gi(ve(i),n)},Fn.padEnd=function(t,e,n){t=ba(t);var r=(e=ma(e))?pn(t):0;return e&&r<e?t+Gi(e-r,n):t},Fn.padStart=function(t,e,n){t=ba(t);var r=(e=ma(e))?pn(t):0;return e&&r<e?Gi(e-r,n)+t:t},Fn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),En(ba(t).replace(it,""),e||0)},Fn.random=function(t,e,r){if(r&&"boolean"!=typeof r&&Ao(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=va(t),e===n?(e=t,t=0):e=va(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var o=On();return bn(t+o*(e-t+ce("1e-"+((o+"").length-1))),e)}return Zr(t,e)},Fn.reduce=function(t,e,n){var r=qu(t)?Ie:Ge,i=arguments.length<3;return r(t,lo(e,4),n,i,dr)},Fn.reduceRight=function(t,e,n){var r=qu(t)?Ue:Ge,i=arguments.length<3;return r(t,lo(e,4),n,i,_r)},Fn.repeat=function(t,e,r){return e=(r?Ao(t,e,r):e===n)?1:ma(e),Qr(ba(t),e)},Fn.replace=function(){var t=arguments,e=ba(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Fn.result=function(t,e,r){var i=-1,o=(e=bi(e,t)).length;for(o||(o=1,t=n);++i<o;){var u=null==t?n:t[Wo(e[i])];u===n&&(i=o,u=r),t=ta(u)?u.call(t):u}return t},Fn.round=Cc,Fn.runInContext=t,Fn.sample=function(t){return(qu(t)?Xn:Xr)(t)},Fn.size=function(t){if(null==t)return 0;if(Yu(t))return la(t)?pn(t):t.length;var e=mo(t);return e==E||e==S?t.size:kr(t).length},Fn.snakeCase=Za,Fn.some=function(t,e,r){var i=qu(t)?Te:ui;return r&&Ao(t,e,r)&&(e=n),i(t,lo(e,3))},Fn.sortedIndex=function(t,e){return ai(t,e)},Fn.sortedIndexBy=function(t,e,n){return ci(t,e,lo(n,2))},Fn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ai(t,e);if(r<n&&zu(t[r],e))return r}return-1},Fn.sortedLastIndex=function(t,e){return ai(t,e,!0)},Fn.sortedLastIndexBy=function(t,e,n){return ci(t,e,lo(n,2),!0)},Fn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ai(t,e,!0)-1;if(zu(t[n],e))return n}return-1},Fn.startCase=Qa,Fn.startsWith=function(t,e,n){return t=ba(t),n=null==n?0:sr(ma(n),0,t.length),e=fi(e),t.slice(n,n+e.length)==e},Fn.subtract=Rc,Fn.sum=function(t){return t&&t.length?qe(t,uc):0},Fn.sumBy=function(t,e){return t&&t.length?qe(t,lo(e,2)):0},Fn.template=function(t,e,r){var i=Fn.templateSettings;r&&Ao(t,e,r)&&(e=n),t=ba(t),e=Oa({},e,i,to);var o,u,a=Oa({},e.imports,i.imports,to),c=Ia(a),s=Qe(a,c),l=0,f=e.interpolate||wt,p="__p += '",h=St((e.escape||wt).source+"|"+f.source+"|"+(f===J?pt:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),d="//# sourceURL="+(Tt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(h,(function(e,n,r,i,a,c){return r||(r=i),p+=t.slice(l,c).replace(bt,on),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(u=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e})),p+="';\n";var _=Tt.call(e,"variable")&&e.variable;if(_){if(lt.test(_))throw new Ot("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(u?p.replace(z,""):p).replace(H,"$1").replace(K,"$1;"),p="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=ec((function(){return Nt(c,d+"return "+p).apply(n,s)}));if(v.source=p,Xu(v))throw v;return v},Fn.times=function(t,e){if((t=ma(t))<1||t>p)return[];var n=d,r=bn(t,d);e=lo(e),t-=d;for(var i=Ve(r,e);++n<t;)e(n);return i},Fn.toFinite=va,Fn.toInteger=ma,Fn.toLength=ga,Fn.toLower=function(t){return ba(t).toLowerCase()},Fn.toNumber=ya,Fn.toSafeInteger=function(t){return t?sr(ma(t),-9007199254740991,p):0===t?t:0},Fn.toString=ba,Fn.toUpper=function(t){return ba(t).toUpperCase()},Fn.trim=function(t,e,r){if((t=ba(t))&&(r||e===n))return Ye(t);if(!t||!(e=fi(e)))return t;var i=hn(t),o=hn(e);return Ei(i,Xe(i,o),tn(i,o)+1).join("")},Fn.trimEnd=function(t,e,r){if((t=ba(t))&&(r||e===n))return t.slice(0,dn(t)+1);if(!t||!(e=fi(e)))return t;var i=hn(t);return Ei(i,0,tn(i,hn(e))+1).join("")},Fn.trimStart=function(t,e,r){if((t=ba(t))&&(r||e===n))return t.replace(it,"");if(!t||!(e=fi(e)))return t;var i=hn(t);return Ei(i,Xe(i,hn(e))).join("")},Fn.truncate=function(t,e){var r=30,i="...";if(ra(e)){var o="separator"in e?e.separator:o;r="length"in e?ma(e.length):r,i="omission"in e?fi(e.omission):i}var u=(t=ba(t)).length;if(un(t)){var a=hn(t);u=a.length}if(r>=u)return t;var c=r-pn(i);if(c<1)return i;var s=a?Ei(a,0,c).join(""):t.slice(0,c);if(o===n)return s+i;if(a&&(c+=s.length-c),ca(o)){if(t.slice(c).search(o)){var l,f=s;for(o.global||(o=St(o.source,ba(ht.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var p=l.index;s=s.slice(0,p===n?c:p)}}else if(t.indexOf(fi(o),c)!=c){var h=s.lastIndexOf(o);h>-1&&(s=s.slice(0,h))}return s+i},Fn.unescape=function(t){return(t=ba(t))&&V.test(t)?t.replace(G,_n):t},Fn.uniqueId=function(t){var e=++jt;return ba(t)+e},Fn.upperCase=Ja,Fn.upperFirst=Xa,Fn.each=bu,Fn.eachRight=Au,Fn.first=Yo,lc(Fn,(Oc={},Ar(Fn,(function(t,e){Tt.call(Fn.prototype,e)||(Oc[e]=t)})),Oc),{chain:!1}),Fn.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Fn[t].placeholder=Fn})),Ce(["drop","take"],(function(t,e){Gn.prototype[t]=function(r){r=r===n?1:wn(ma(r),0);var i=this.__filtered__&&!e?new Gn(this):this.clone();return i.__filtered__?i.__takeCount__=bn(r,i.__takeCount__):i.__views__.push({size:bn(r,d),type:t+(i.__dir__<0?"Right":"")}),i},Gn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Gn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ce(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Gn.prototype[t]=function(){return this[n](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Gn.prototype[t]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(uc)},Gn.prototype.find=function(t){return this.filter(t).head()},Gn.prototype.findLast=function(t){return this.reverse().find(t)},Gn.prototype.invokeMap=Jr((function(t,e){return"function"==typeof t?new Gn(this):this.map((function(n){return Mr(n,t,e)}))})),Gn.prototype.reject=function(t){return this.filter(ku(lo(t)))},Gn.prototype.slice=function(t,e){t=ma(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Gn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=ma(e))<0?r.dropRight(-e):r.take(e-t)),r)},Gn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gn.prototype.toArray=function(){return this.take(d)},Ar(Gn.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Fn[i?"take"+("last"==e?"Right":""):e],u=i||/^find/.test(e);o&&(Fn.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,c=e instanceof Gn,s=a[0],l=c||qu(e),f=function(t){var e=o.apply(Fn,Le([t],a));return i&&p?e[0]:e};l&&r&&"function"==typeof s&&1!=s.length&&(c=l=!1);var p=this.__chain__,h=!!this.__actions__.length,d=u&&!p,_=c&&!h;if(!u&&l){e=_?e:new Gn(this);var v=t.apply(e,a);return v.__actions__.push({func:vu,args:[f],thisArg:n}),new Kn(v,p)}return d&&_?t.apply(this,a):(v=this.thru(f),d?i?v.value()[0]:v.value():v)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=xt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Fn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(qu(i)?i:[],t)}return this[n]((function(n){return e.apply(qu(n)?n:[],t)}))}})),Ar(Gn.prototype,(function(t,e){var n=Fn[e];if(n){var r=n.name+"";Tt.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:e,func:n})}})),Ln[Fi(n,2).name]=[{name:"wrapper",func:n}],Gn.prototype.clone=function(){var t=new Gn(this.__wrapped__);return t.__actions__=xi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=xi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=xi(this.__views__),t},Gn.prototype.reverse=function(){if(this.__filtered__){var t=new Gn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=qu(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],u=o.size;switch(o.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=bn(e,t+u);break;case"takeRight":t=wn(t,e-u)}}return{start:t,end:e}}(0,i,this.__views__),u=o.start,a=o.end,c=a-u,s=r?a:u-1,l=this.__iteratees__,f=l.length,p=0,h=bn(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return vi(t,this.__actions__);var d=[];t:for(;c--&&p<h;){for(var _=-1,v=t[s+=e];++_<f;){var m=l[_],g=m.iteratee,y=m.type,w=g(v);if(2==y)v=w;else if(!w){if(1==y)continue t;break t}}d[p++]=v}return d},Fn.prototype.at=mu,Fn.prototype.chain=function(){return _u(this)},Fn.prototype.commit=function(){return new Kn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===n&&(this.__values__=_a(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Fn.prototype.plant=function(t){for(var e,r=this;r instanceof Hn;){var i=Fo(r);i.__index__=0,i.__values__=n,e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e},Fn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gn){var e=t;return this.__actions__.length&&(e=new Gn(this)),(e=e.reverse()).__actions__.push({func:vu,args:[ru],thisArg:n}),new Kn(e,this.__chain__)}return this.thru(ru)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,ee&&(Fn.prototype[ee]=function(){return this}),Fn}();de?((de.exports=vn)._=vn,he._=vn):pe._=vn}).call(Ht)}(Kt,Kt.exports);const Gt="_register";function qt(t,e,n,...r){return n.apply(t,e?[e,...r]:r)}function Vt(t,e){new Promise((async(n,r)=>{try{const i=await t(e.data);e.resolve({cmd:e.cmd,data:i,resolve:n,reject:r})}catch(t){throw e.reject(t),t}}))}const Yt=zt,Zt=window.microApp;t.useMicroApp=function(...t){let[e,n]=t;Kt.exports.isString(e)||(n=e,e="");const{onRegistered:r}=n||{};let i=e?Yt:Zt,o=new Map,u=new Map,a=new Map;function c(t,e,n){const{immediate:r=!1,force:i=!1}=n||{};if(o.get(t)){if(!i)return void console.warn(`MicroApp: will ignore listen ${t}, because it already exists and dose not force.`);console.warn(`MicroApp: will force listen ${t}.`)}const a=u.get(t);a&&(r&&a.forEach((t=>Vt(e,t))),u.delete(t)),o.set(t,{fn:e})}function s(t){const{cmd:e}=t,n=o.get(e);if(n)Vt(n.fn,t);else{const n=u.get(e);u.set(e,n?n.concat(t):[t])}}function l(t){return new Promise(((n,r)=>{const o={...t,resolve:n,reject:r};"setData"in i?i.setData(e,o):i.dispatch(o)}))}return qt(i,e,i.addDataListener,s,!0),c(Gt,(t=>{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&a.set(e,t[e]);r&&r(a)}),{immediate:!0}),{microApp:i,addEventListener:c,removeEventListener:function(t){o.delete(t)},destroy:function(){o.clear(),u.clear(),a.clear(),o=null,u=null,a=null,qt(i,e,i.removeDataListener,s),i=null},dispatch:l,registered:a,register:async function(t){(await l({cmd:Gt,data:t}))?.resolve()}}},Object.defineProperty(t,"__esModule",{value:!0})}));
